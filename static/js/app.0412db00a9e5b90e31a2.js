webpackJsonp([1],{"/avL":function(t,e){},"0Y+k":function(t,e){},"3QKp":function(t,e){},"7SuA":function(t,e){},E51W:function(t,e){},GQSF:function(t,e){},IvCQ:function(t,e){},JHHi:function(t,e){},JSmb:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("NYxO"),s={name:"App",watch:{$route:function(){this.$store.dispatch("initUser",{$router:this.$router})}},mounted:function(){navigator.userAgent.indexOf("iPhone")>0?this.$store.commit("changeAppbarStyle","top-van-backage-iphone"):this.$store.commit("changeAppbarStyle","top-van-backage-oneplus"),this.$store.dispatch("initUser",{$router:this.$router})}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")(s,o,!1,function(t){n("IvCQ")},null,null).exports,l=n("/ocq"),u={data:function(){return{active:0,pwdErrorText:"",nameErrorText:"",loginModel:{username:"",password1:"",password2:"",remember:!0},usernameRules:[{validate:function(t){return!!t},message:"必须填写用户名"},{validate:function(t){return t.length>=3},message:"用户名长度大于2"}],passwordRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>5},message:"密码长度大于5"}]}},methods:{submit:function(){var t=this;t.$refs.form.validate().then(function(e){if(e)if(1!=t.active||t.loginModel.password1==t.loginModel.password2){if(!(t.nameErrorText.length>0)){var n=t.$loading();t.pwdErrorText="";var a=0==t.active?"/signin":"/signup";t.$axios.post(a,{name:t.loginModel.username,password:t.loginModel.password1,remember:t.loginModel.remember}).then(function(e){e.data.result?0==t.active?(localStorage.setItem("token",e.data.token),t.$toast.success("登陆成功, 请稍后..."),setTimeout(function(){t.$router.push({path:"/"})},1200)):(t.$toast.success("注册成功, 请登录"),t.active=0):0==t.active?t.$toast.warning("用户名或者密码错误"):t.$toast.warning("用户名已存在"),n.close()}).catch(function(e){t.$toast.error("登陆异常, 请重试~"),n.close()})}}else t.pwdErrorText="两次输入的密码不一致"})},chenkName:function(){var t=this;if(0==t.active||t.loginModel.username.length<3)t.nameErrorText="";else{var e=t.$loading({});t.$axios.get("/signupcheck/"+t.loginModel.username).then(function(n){n.data.exist&&(t.nameErrorText="已存在的用户名"),e.close()}).catch(function(n){t.$toast.error("网路异常, 请重试"),e.close()})}}},watch:{active:function(t){this.$refs.form.clear(),this.loginModel.username.length<=2&&(this.loginModel.username=""),this.loginModel.password1="",this.loginModel.password2="",this.loginModel.remember=!0}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-container",[n("mu-paper",{staticClass:"head-paper",attrs:{circle:"","z-depth":3}},[n("img",{staticClass:"head-img",attrs:{src:"/static/images/head-default.png"}})]),t._v(" "),n("mu-tabs",{attrs:{value:t.active,inverse:"",color:"#ff4081","text-color":"rgba(0, 0, 0, .54)","full-width":""},on:{"update:value":function(e){t.active=e}}},[n("mu-tab",[t._v("登 陆")]),t._v(" "),n("mu-tab",[t._v("注 册")])],1),t._v(" "),n("mu-form",{ref:"form",staticStyle:{height:"28px","margin-top":"36px"},attrs:{model:t.loginModel}},[n("mu-form-item",{attrs:{label:"用户名",prop:"username",rules:t.usernameRules}},[n("mu-text-field",{attrs:{"error-text":t.nameErrorText,prop:"username"},on:{blur:t.chenkName},model:{value:t.loginModel.username,callback:function(e){t.$set(t.loginModel,"username",e)},expression:"loginModel.username"}})],1),t._v(" "),n("mu-form-item",{attrs:{label:"密码",prop:"password1",rules:t.passwordRules}},[n("mu-text-field",{attrs:{type:"password",prop:"password"},model:{value:t.loginModel.password1,callback:function(e){t.$set(t.loginModel,"password1",e)},expression:"loginModel.password1"}})],1),t._v(" "),1==t.active?n("mu-form-item",{attrs:{label:"确认密码",prop:"password2",rules:t.passwordRules}},[n("mu-text-field",{attrs:{type:"password","error-text":t.pwdErrorText,prop:"password"},model:{value:t.loginModel.password2,callback:function(e){t.$set(t.loginModel,"password2",e)},expression:"loginModel.password2"}})],1):t._e(),t._v(" "),0==t.active?n("mu-form-item",{attrs:{prop:"remember"}},[n("mu-checkbox",{attrs:{label:"记住密码"},model:{value:t.loginModel.remember,callback:function(e){t.$set(t.loginModel,"remember",e)},expression:"loginModel.remember"}})],1):t._e(),t._v(" "),n("mu-form-item",[n("mu-button",{staticStyle:{width:"95%"},attrs:{round:"","full-width":"",color:"primary"},on:{click:t.submit}},[t._v("\n        "+t._s(1==t.active?"注 册":"登 陆")+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(u,c,!1,function(t){n("3QKp")},"data-v-d09190ce",null).exports,p=n("Dd8w"),d=n.n(p),h={data:function(){return{title:"",value:""}},methods:{goto:function(t){this.$router.push({path:t})},init:function(){switch(this.$router.currentRoute.path){case"/":this.title="添加一笔";break;case"/tally":this.title="账单";break;case"/me":this.title="我"}this.value=this.$router.currentRoute.path}},computed:d()({},Object(i.b)(["appbarStyle"])),watch:{$route:function(t){this.init()}},mounted:function(){this.init()}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mu-appbar",{class:"top-van "+t.appbarStyle,attrs:{title:t.title}},[n("mu-button",{attrs:{slot:"right",icon:"",flat:""},slot:"right"},[n("i",{staticClass:"fa fa-github",staticStyle:{"font-size":"26px","margin-right":"15px"}})])],1),t._v(" "),n("mu-container",{staticStyle:{position:"absolute",top:"65px"}},[t._t("default")],2),t._v(" "),n("mu-bottom-nav",{staticClass:"bot-van",attrs:{value:t.value},on:{"update:value":function(e){t.value=e},change:t.goto}},[n("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/",icon:":fa fa-circle-o-notch"}}),t._v(" "),n("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/tally",icon:":fa fa-pie-chart"}}),t._v(" "),n("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/me",icon:":fa fa-user-circle-o"}})],1)],1)},staticRenderFns:[]};var f=n("VU/8")(h,v,!1,function(t){n("/avL")},null,null).exports,_=n("4qdD"),y=n.n(_),g={props:{user:{type:Object,required:!0}},data:function(){return{}},watch:{user:function(t){for(var e=[],n=parseInt((t.budget/50).toFixed(0)),a=0;a<=t.budget;a++)a%n==0&&e.push(a);e.push(t.budget);var i=y.a.Shape,s=[{pointer:"\n剩余预算 "+(t.budget-t.haveBeenUsed)+" 元\n\n预支 "+t.haveBeenAdvance+" 元",value:t.haveBeenUsed,length:0,y:1}];i.registerShape("point","dashBoard",{getPoints:function(t){var e=t.x;return[{x:e,y:t.y},{x:e,y:.4}]},draw:function(t,e){var n=t.points[0],a=t.points[1];n=this.parsePoint(n),a=this.parsePoint(a);var i=e.addShape("Polyline",{attrs:{points:[n,a],stroke:"#d84315",lineWidth:2}}),s=t.origin._origin.value.toString();return[i,e.addShape("Text",{attrs:{text:s+" 元",x:t.center.x,y:t.center.y,fill:"#d84315",fontSize:22,textAlign:"center",textBaseline:"bottom"}}),e.addShape("Text",{attrs:{text:t.origin._origin.pointer,x:t.center.x,y:t.center.y,fillStyle:"#ccc",textAlign:"center",textBaseline:"top"}})]}});var o=new y.a.Chart({id:"mountNode",animate:!1,pixelRatio:window.devicePixelRatio});o.source(s,{value:{type:"linear",min:0,max:t.budget,ticks:e,nice:!1},length:{type:"linear",min:0,max:1},y:{type:"linear",min:0,max:1}}),o.coord("polar",{inner:0,startAngle:-1.25*Math.PI,endAngle:.25*Math.PI}),o.axis("value",{tickLine:{strokeStyle:"#ccc",lineWidth:3,length:-6},label:null,grid:null,line:null}),o.axis("y",!1);var r=t.haveBeenUsed-n/3;t.haveBeenUsed>0&&o.guide().arc({start:[10,1.05],end:[r>n?r:n/3,1.05],style:{strokeStyle:"#d84315",lineWidth:4,lineCap:"round"}}),o.guide().arc({start:[t.haveBeenUsed+n/3,1.05],end:[t.budget-10,1.05],style:{strokeStyle:"#1890FF",lineWidth:4,lineCap:"round"}}),o.guide().text({position:[t.budget,1.2],content:t.budget+"",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),o.guide().text({position:[0,1.2],content:"0",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),o.guide().text({position:[t.budget/2,1.16],content:t.budget/2+"",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),o.point().position("value*y").size("length").color("#1890FF").shape("dashBoard"),o.render()}}},b={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{staticStyle:{width:"100%"},attrs:{id:"mountNode",height:"246"}})},staticRenderFns:[]},x=n("VU/8")(g,b,!1,null,null,null).exports,$=n("Gu7T"),k=n.n($),w={props:{openTally:{type:Boolean,required:!0},consume:{type:String,required:!0},money:{type:String,required:!0}},data:function(){return{thatStep:-1,tallyForm:{mode:"",channel:"",date:"",remark:""},manyType:{channels:[],modes:[{content:"收入"},{content:"支出"},{content:"预支"}],consumes:[]}}},computed:d()({},Object(i.b)(["currentUser","appbarStyle"])),methods:{submit:function(){var t=this,e=t.$loading({});t.$axios.post("/inserttally",{token:localStorage.getItem("token"),money:parseFloat(t.money),type:t.consume,mode:t.tallyForm.mode,channel:t.tallyForm.channel,remark:t.tallyForm.remark,ctime:t.tallyForm.date}).then(function(n){n.data.result?(t.$toast.success("添加成功"),setTimeout(function(){t.$emit("update:openTally",!1),t.$emit("update:consume",""),t.$emit("update:money","")},1200)):t.$toast.error("网络异常,请重试"),e.close()}).catch(function(e){t.$toast.error("系统错误")})}},watch:{currentUser:function(t){this.manyType.channels=[{content:"",default:[]}].concat(k()(t.channels)),this.manyType.consumes=this.$linq(t.consumes).select(function(t){return t.content}).toArray()},thatStep:function(t){var e=this;if(0==t){var n=e.$linq(e.currentUser.consumes).firstOrDefault(function(t){return t.content==e.consume});n&&(e.manyType.modes=e.$linq(e.manyType.modes).select(function(t){return t.hide=n.default.indexOf(t.content)<0,t}).toArray());var a=e.$linq(e.manyType.modes).where(function(t){return!t.hide}).toArray();1==a.length&&(e.thatStep+=1,e.tallyForm.mode=a[0].content)}else if(1==t)e.$linq(e.manyType.channels).select(function(t){return t.hide=t.default.indexOf(e.tallyForm.mode)<0,t}).toArray();else if(2==t){e.tallyForm.date=new Date;var i="收入"==e.tallyForm.mode?"收取":"支付";e.tallyForm.remark=""+e.consume+e.tallyForm.mode+"了"+e.money+"元，通过"+e.tallyForm.channel+i+"。"}},openTally:function(t){t?this.thatStep=0:(this.thatStep=-1,this.tallyForm={mode:"",channel:"",date:"",remark:""})}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-dialog",{attrs:{fullscreen:"",open:t.openTally},on:{"update:open":function(e){t.openTally=e}}},[n("mu-appbar",{class:t.appbarStyle,attrs:{title:t.consume+"："+t.money+" 元"}},[n("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.$emit("update:openTally",!1)}},slot:"left"},[n("mu-icon",{attrs:{value:"close"}})],1),t._v(" "),2==t.thatStep?n("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.submit},slot:"right"},[t._v("\n      完成\n    ")]):t._e()],1),t._v(" "),n("br"),t._v(" "),n("mu-stepper",{attrs:{"active-step":t.thatStep,orientation:"vertical"}},[n("mu-step",[n("mu-step-label",[t._v("\n        收入/支出/预支\n        "),n("b",[t._v(t._s(t.tallyForm.mode.length>0?" ：":"")+t._s(t.tallyForm.mode))])]),t._v(" "),n("mu-step-content",[n("mu-list",t._l(t.manyType.modes,function(e,a){return e.content.length>0&&!e.hide?n("mu-list-item",{key:a},[n("mu-list-item-content",[n("mu-radio",{attrs:{label:e.content,value:e.content},on:{change:function(e){t.thatStep++}},model:{value:t.tallyForm.mode,callback:function(e){t.$set(t.tallyForm,"mode",e)},expression:"tallyForm.mode"}})],1)],1):t._e()}))],1)],1),t._v(" "),n("mu-step",[n("mu-step-label",[t._v("\n        方式\n        "),n("b",[t._v(t._s(t.tallyForm.channel.length>0?" ：":"")+t._s(t.tallyForm.channel))])]),t._v(" "),n("mu-step-content",[n("mu-list",t._l(t.manyType.channels,function(e,a){return e.content.length>0&&!e.hide?n("mu-list-item",{key:a},[n("mu-list-item-content",[n("mu-radio",{attrs:{label:e.content,value:e.content},on:{change:function(e){t.thatStep++}},model:{value:t.tallyForm.channel,callback:function(e){t.$set(t.tallyForm,"channel",e)},expression:"tallyForm.channel"}})],1)],1):t._e()})),t._v(" "),n("mu-button",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.thatStep--}}},[t._v("上一步")])],1)],1),t._v(" "),n("mu-step",[n("mu-step-label",[t._v("\n        其他\n      ")]),t._v(" "),n("mu-step-content",[n("br"),t._v(" "),n("mu-form",{attrs:{model:t.tallyForm,"label-position":"top","label-width":"70"}},[n("mu-form-item",{attrs:{prop:"date",label:"日期"}},[n("mu-date-input",{staticStyle:{height:"30px"},attrs:{type:"dateTime",actions:""},model:{value:t.tallyForm.date,callback:function(e){t.$set(t.tallyForm,"date",e)},expression:"tallyForm.date"}})],1),t._v(" "),n("mu-form-item",{attrs:{prop:"input",label:"备注"}},[n("mu-text-field",{staticStyle:{height:"30px"},model:{value:t.tallyForm.remark,callback:function(e){t.$set(t.tallyForm,"remark",e)},expression:"tallyForm.remark"}})],1),t._v(" "),n("mu-form-item",[n("mu-button",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.thatStep--}}},[t._v("上一步")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},F={components:{layoutmain:f,residue:x,addtally:n("VU/8")(w,S,!1,null,null,null).exports},data:function(){return{tallyForm:{money:"",consume:""},consumes:[],openTally:!1,tallyList:[],titleWidth:.72*document.body.clientWidth}},methods:{showMode:function(){var t=this;if(!(this.tallyForm.money.length<=0||this.tallyForm.consume.length<=0)){var e=this;setTimeout(function(){e.openTally=!0},220);var n=!1;this.consumes.forEach(function(e){e==t.tallyForm.consume&&(n=!0)}),n||this.currentUser.consumes.push({content:this.tallyForm.consume,count:1,default:["收入","支出","预支"]})}},initLate:function(){var t=this;t.$axios.post("/gettallybyuser",{token:localStorage.getItem("token"),pageIndex:1,pageSize:5}).then(function(e){e.data.result&&null!=e.data.body&&(t.tallyList=e.data.body)})},formatDate:function(t){return this.$format(t,"yyyy-MM-dd hh:mm")}},computed:d()({},Object(i.b)(["currentUser"])),watch:{currentUser:function(t){var e=this;this.consumes=[],t.consumes.forEach(function(t){e.consumes.push(t.content)})},openTally:function(t){t||(this.tallyForm={money:"",consume:""},this.initLate(),this.$store.dispatch("initUser",{$router:this.$router}))}},mounted:function(){this.initLate()}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layoutmain",[n("mu-paper",{staticClass:"paper-title",style:"height:"+t.titleWidth+"px;",attrs:{"z-depth":0}},[n("residue",{attrs:{user:t.currentUser}})],1),t._v(" "),n("mu-paper",{staticStyle:{height:"100px",padding:"10px"},attrs:{"z-depth":1}},[n("mu-text-field",{staticStyle:{height:"80px",width:"50%"},attrs:{label:"金额",prefix:"￥",type:"number","label-float":""},on:{blur:t.showMode},model:{value:t.tallyForm.money,callback:function(e){t.$set(t.tallyForm,"money",e)},expression:"tallyForm.money"}}),t._v(" "),n("mu-auto-complete",{staticStyle:{height:"80px",width:"45%"},attrs:{data:t.consumes,label:"种类","max-search-results":8,"open-on-focus":"","label-float":""},on:{change:t.showMode},model:{value:t.tallyForm.consume,callback:function(e){t.$set(t.tallyForm,"consume",e)},expression:"tallyForm.consume"}})],1),t._v(" "),n("br"),t._v(" "),0!=t.tallyList.length?n("mu-list",[n("mu-sub-header",[t._v("\n      最近消费\n      "),n("mu-button",{staticClass:"button-right",attrs:{flat:"",color:"primary"}},[t._v("更多")])],1),t._v(" "),n("mu-divider"),t._v(" "),t._l(t.tallyList,function(e,a){return n("mu-list-item",{key:a,attrs:{avatar:"",ripple:!1}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:"/static/images/head-default.png"}})])],1),t._v(" "),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.remark))]),t._v(" "),n("mu-list-item-sub-title",[t._v(t._s(t.formatDate(e.ctime)))])],1)],1)})],2):t._e(),t._v(" "),n("mu-list",[n("mu-sub-header",[t._v("\n      快速记录\n      "),n("mu-button",{staticClass:"button-right",attrs:{flat:"",color:"primary"}},[t._v("新增")])],1),t._v(" "),n("mu-divider"),t._v(" "),n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!0}},[n("mu-list-item-action",{staticStyle:{width:"280px"}},[t._v("\n        15 元\n      ")]),t._v(" "),n("mu-list-item-title",[t._v("午餐")]),t._v(" "),n("mu-list-item-action",[n("mu-button",{attrs:{icon:"",color:"#4caf50"}},[n("mu-icon",{attrs:{value:"fast_forward"}})],1)],1)],1),t._v(" "),n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!1}},[n("mu-list-item-action"),t._v(" "),n("mu-list-item-title"),t._v(" "),n("mu-list-item-action")],1)],1),t._v(" "),n("addtally",{attrs:{openTally:t.openTally,money:t.tallyForm.money,consume:t.tallyForm.consume},on:{"update:openTally":function(e){t.openTally=e}}})],1)},staticRenderFns:[]};var T=n("VU/8")(F,U,!1,function(t){n("GQSF")},"data-v-056bb1a8",null).exports,M={props:{alert:{type:Boolean,required:!0},user:{type:Object,required:!0},type:{type:String,required:!0}},data:function(){return{thenAlert:this.alert,title:"",value:"",oldValue:"",prefix:"",textType:"number",textError:""}},methods:{submitBase:function(){var t=this,e=this,n=e.$loading(),a={token:localStorage.getItem("token"),id:e.user.id,nick:e.user.nick,budget:parseFloat(e.user.budget),fixDate:parseFloat(e.user.fixDate),wechatPay:parseFloat(e.user.wechatPay),aliPay:parseFloat(e.user.aliPay),backCard:parseFloat(e.user.backCard),cash:parseFloat(e.user.cash)};switch(this.type){case"nick":a.nick=e.value;break;case"budget":a.budget=parseFloat(e.value);break;case"backCard":a.backCard=parseFloat(e.value);break;case"aliPay":a.aliPay=parseFloat(e.value);break;case"wechatPay":a.wechatPay=parseFloat(e.value);break;case"fixDate":a.fixDate=parseFloat(e.value)}e.$axios.post("/setuserbaseinfo",a).then(function(a){a.data.result?(e.$toast.success("修改成功"),e.$store.dispatch("initUser",{$router:t.$router}),e.thenAlert=!1):e.$toast.warning("修改失败, 请重试"),n.close()}).catch(function(t){e.$toast.error("网络异常, 请重试..."),n.close()})},switchType:function(){switch(this.type){case"nick":this.title="修改昵称",this.oldValue=this.user.nick+"",this.prefix="昵称: ",this.textType="string";break;case"budget":this.title="修改预算",this.oldValue=this.user.budget+"",this.prefix="预算: ";break;case"backCard":this.title="修改银行卡余额",this.oldValue=this.user.backCard+"",this.prefix="银行卡余额: ";break;case"aliPay":this.title="修改支付宝余额",this.oldValue=this.user.aliPay+"",this.prefix="支付宝余额: ";break;case"wechatPay":this.title="修改微信余额",this.oldValue=this.user.wechatPay+"",this.prefix="微信余额: ";break;case"fixDate":this.title="修改定期余额",this.oldValue=this.user.fixDate+"",this.prefix="定期余额: "}}},watch:{thenAlert:function(t){t||this.$emit("update:alert",t)},alert:function(t){t&&(this.switchType(),this.thenAlert=t,this.value="")}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mu-dialog",{attrs:{title:t.title,width:"600","max-width":"80%","esc-press-close":!1,"overlay-close":!1,open:t.thenAlert},on:{"update:open":function(e){t.thenAlert=e}}},[n("mu-text-field",{attrs:{type:t.textType,label:t.oldValue,prefix:t.prefix,"error-text":t.textError,"label-float":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),n("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(e){t.thenAlert=!1}},slot:"actions"},[t._v("取消")]),t._v(" "),n("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.submitBase},slot:"actions"},[t._v("保存")])],1)},staticRenderFns:[]};var A={components:{setuserbaseinfo:n("VU/8")(M,C,!1,function(t){n("x8gK")},null,null).exports,layoutmain:f},data:function(){return{open:"",baseInfo:{alert:!1,type:""},addpartnerOpen:!1,messageUnreadCount:0,openMessage:!1}},computed:d()({},Object(i.b)(["currentUser"])),methods:{loginOut:function(){var t=this;t.$axios.get("/removetoken/"+localStorage.getItem("token")).then(function(e){localStorage.clear(),alert("已退出登陆"),t.$router.push({path:"/sign"})})},openBaseInfoSet:function(t){this.baseInfo={alert:!0,type:t}}},watch:{currentUser:function(t){var e=this;e.$axios.get("/getmessageunreadcount/"+t.id).then(function(t){e.messageUnreadCount=t.data.result})}},mounted:function(){}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("layoutmain",[n("mu-paper",{staticStyle:{height:"110px",padding:"10px"},attrs:{"z-depth":2}},[n("mu-list",{attrs:{textline:"three-line"}},[n("mu-list-item",{attrs:{avatar:"",button:"",ripple:!1}},[n("mu-list-item-action",[n("mu-avatar",{staticStyle:{width:"70px",height:"70px"}},[n("img",{attrs:{src:"/static/images/head-default.png"}})])],1),t._v(" "),n("mu-list-item-content",{staticStyle:{"margin-left":"22px","margin-top":"-17px"}},[n("mu-list-item-title",[t._v(t._s(t.currentUser.nick))]),t._v(" "),n("mu-list-item-sub-title",[t._v("\n            账号 : "+t._s(t.currentUser.name)+"\n          ")]),t._v(" "),n("mu-list-item-sub-title",[t._v("\n            备注 : "+t._s(t.currentUser.intro)+"\n          ")])],1),t._v(" "),n("mu-list-item-action",[t.messageUnreadCount>0?n("mu-badge",{attrs:{content:t.messageUnreadCount+"",circle:"",color:"secondary"}},[n("mu-button",{attrs:{icon:"",color:"blue"},on:{click:function(e){t.$router.push({path:"message"})}}},[n("mu-icon",{attrs:{value:"notifications"}})],1)],1):n("mu-button",{attrs:{icon:""},on:{click:function(e){t.$router.push({path:"message"})}}},[n("mu-icon",{attrs:{value:"notifications"}})],1)],1)],1)],1)],1),t._v(" "),n("br"),t._v(" "),n("mu-list",{attrs:{"toggle-nested":""}},[n("mu-sub-header",[t._v("个人设置")]),t._v(" "),n("mu-divider"),t._v(" "),n("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"base"===t.open},on:{"toggle-nested":function(e){t.open=arguments[0]?"base":""}}},[n("mu-list-item-title",[t._v("基本信息")]),t._v(" "),n("mu-list-item-action",["base"===t.open?n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_up"}}):n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("头像")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"edit",color:"Teal"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("nick")}},slot:"nested"},[n("mu-list-item-title",[t._v("昵称")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"edit",color:"Teal"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("密码")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"edit",color:"Teal"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("budget")}},slot:"nested"},[n("mu-list-item-title",[t._v("\n          每月预算\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money"},[t._v(t._s(t.$numberFormat(t.currentUser.budget)))])])],1)],1),t._v(" "),n("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"partner"===t.open},on:{"toggle-nested":function(e){t.open=arguments[0]?"partner":""}}},[n("mu-list-item-title",[t._v("小伙伴")]),t._v(" "),n("mu-list-item-action",["partner"===t.open?n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_up"}}):n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),t._v(" "),t._l(t.currentUser.partners,function(e){return n("mu-list-item",{key:e.id,attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.headImg}})])],1),t._v(" "),n("mu-list-item-title",[t._v(t._s(e.nick))]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"chat_bubble"}})],1)],1)}),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.$router.push({path:"addpartner"})}},slot:"nested"},[n("mu-list-item-title",[t._v("添加更多")]),t._v(" "),n("mu-list-item-action",[n("mu-button",{attrs:{icon:"",color:"#f44336"}},[n("mu-icon",{attrs:{value:"zoom_in"}})],1)],1)],1)],2)],1),t._v(" "),n("mu-list",{attrs:{"toggle-nested":""}},[n("mu-sub-header",[t._v("账单")]),t._v(" "),n("mu-divider"),t._v(" "),n("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"money"===t.open},on:{"toggle-nested":function(e){t.open=arguments[0]?"money":""}}},[n("mu-list-item-title",[t._v("余额")]),t._v(" "),n("mu-list-item-action",["money"===t.open?n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_up"}}):n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("backCard")}},slot:"nested"},[n("mu-list-item-title",[t._v("\n          银行卡\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money"},[t._v(t._s(t.$numberFormat(t.currentUser.backCard)))])])],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("aliPay")}},slot:"nested"},[n("mu-list-item-title",[t._v("\n          支付宝\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money"},[t._v(t._s(t.$numberFormat(t.currentUser.aliPay)))])])],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("wechatPay")}},slot:"nested"},[n("mu-list-item-title",[t._v("\n          微信\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money"},[t._v(t._s(t.$numberFormat(t.currentUser.wechatPay)))])])],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},on:{click:function(e){t.openBaseInfoSet("fixDate")}},slot:"nested"},[n("mu-list-item-title",[t._v("\n          定期 :\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money"},[t._v(t._s(t.$numberFormat(t.currentUser.fixDate)))])])],1)],1),t._v(" "),n("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"advance"===t.open},on:{"toggle-nested":function(e){t.open=arguments[0]?"advance":""}}},[n("mu-list-item-title",[t._v("预支")]),t._v(" "),n("mu-list-item-action",["advance"===t.open?n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_up"}}):n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("\n          花呗\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money loan"},[t._v(t._s(t.$numberFormat(t.currentUser.antCheck)))])])],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("\n          信用卡\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money loan"},[t._v(t._s(t.$numberFormat(t.currentUser.creditCard)))])])],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("\n          白条\n        ")]),t._v(" "),n("mu-list-item-action",[n("span",{staticClass:"span-money loan"},[t._v(t._s(t.$numberFormat(t.currentUser.whiteBar)))])])],1)],1),t._v(" "),n("mu-list-item",{attrs:{button:"",ripple:!1,nested:"",open:"loan"===t.open},on:{"toggle-nested":function(e){t.open=arguments[0]?"loan":""}}},[n("mu-list-item-title",[t._v("贷款/分期")]),t._v(" "),n("mu-list-item-action",["loan"===t.open?n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_up"}}):n("mu-icon",{staticClass:"toggle-icon",attrs:{size:"24",value:"keyboard_arrow_down"}})],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("\n          房贷:\n          "),n("span",{staticClass:"span-content"},[t._v("\n            每月\n            "),n("span",{staticClass:"span-money loan"},[t._v("2,876")]),t._v("\n            元->2019年5月结束\n          ")])]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"edit",color:"Teal"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("\n          信用卡分期 :\n          "),n("span",{staticClass:"span-content"},[t._v("\n            每月\n            "),n("span",{staticClass:"span-money loan"},[t._v("2,876")]),t._v("\n            元->2019年5月结束\n          ")])]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"edit",color:"Teal"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{slot:"nested",button:"",ripple:!0},slot:"nested"},[n("mu-list-item-title",[t._v("添加更多")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"add",color:"Red"}})],1)],1)],1)],1),t._v(" "),n("mu-list",[n("mu-sub-header",[t._v("其他")]),t._v(" "),n("mu-divider"),t._v(" "),n("mu-list-item",{attrs:{button:""}},[n("mu-list-item-title",[t._v("快速消费类型")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"navigate_next"}})],1)],1),t._v(" "),n("mu-list-item",{attrs:{button:""}},[n("mu-list-item-title",[t._v("账单类型")]),t._v(" "),n("mu-list-item-action",[n("mu-icon",{attrs:{value:"navigate_next"}})],1)],1)],1),t._v(" "),n("br"),n("br"),t._v(" "),n("mu-flex",{attrs:{"justify-content":"center","align-items":"center"}},[n("mu-button",{attrs:{round:"",color:"success","full-width":""},on:{click:t.loginOut}},[t._v("退出登陆")])],1),t._v(" "),n("setuserbaseinfo",{attrs:{user:t.currentUser,type:t.baseInfo.type,alert:t.baseInfo.alert},on:{"update:alert":function(e){t.$set(t.baseInfo,"alert",e)}}})],1)},staticRenderFns:[]};var I=n("VU/8")(A,E,!1,function(t){n("mcFJ")},null,null).exports,V={components:{layoutmain:f}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("layoutmain",[this._v("\n  todo\n")])},staticRenderFns:[]};var P=n("VU/8")(V,R,!1,function(t){n("tFaw")},null,null).exports,D={props:{righticon:{type:String},rightevent:{type:Function},title:{type:String}},computed:d()({},Object(i.b)(["appbarStyle"]))},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mu-appbar",{class:"top-van "+t.appbarStyle},[n("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.$router.back(-1)}},slot:"left"},[n("mu-icon",{attrs:{value:"reply",left:""}})],1),t._v("\n    "+t._s(t.title)+"\n    "),t.righticon?n("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.rightevent},slot:"right"},[n("mu-icon",{attrs:{value:"menu"}})],1):t._e()],1),t._v(" "),n("mu-container",{staticStyle:{position:"absolute",top:"65px"}},[t._t("default")],2)],1)},staticRenderFns:[]};var q=n("VU/8")(D,B,!1,function(t){n("JHHi")},null,null).exports,z={components:{minor:q},data:function(){return{searchValue:"",panel:"",oldSearchValue:[],list:[],searching:!1}},methods:{toggle:function(t){this.panel=t===this.panel?"":t},send:function(t,e,n){this.$store.dispatch("sendMessage",{tid:t,fid:this.currentUser.id,content:"向你发送了添加小伙伴的邀请",needTouch:!0,type:1})},search:function(){var t=this;t.searching=!0,t.$axios.get("/findusersbyname/"+t.searchValue).then(function(e){if(null!=e.data.result){var n=t.$linq(t.currentUser.partners).select(function(t){return t.id}).toArray();t.list=t.$linq(e.data.result).where(function(e){return n.indexOf(e.id)<0&&t.currentUser.id!=e.id}).toArray(),t.list.length<1&&t.$toast.info("可能你们已经是小伙伴了")}else t.list=[],t.$toast.info("查无结果~~~");t.oldSearchValue=[],t.searching=!1}).catch(function(e){t.$toast.error("网络异常,请重试"),t.searching=!1})}},watch:{searchValue:function(t){var e=this;e.oldSearchValue.push(t),setTimeout(function(n){e.oldSearchValue.length>0&&t==e.oldSearchValue[e.oldSearchValue.length-1]&&(t?e.search():e.list=[])},500)}},computed:d()({},Object(i.b)(["currentUser"]))},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("minor",{attrs:{title:"添加小伙伴"}},[n("div",{staticStyle:{padding:"24px"}},[n("mu-text-field",{staticStyle:{width:"100%"},attrs:{label:"搜索对方的账号","action-icon":t.searching?"autorenew":"search"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),n("br")],1),t._v(" "),n("div",{staticStyle:{padding:"0px 9px","margin-top":"-21px"}},t._l(t.list,function(e){return n("mu-expansion-panel",{key:e.id,attrs:{expand:t.panel===e.name},on:{change:function(n){t.toggle(e.name)}}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(e.name))]),t._v(" "),n("mu-flex",{attrs:{"align-items":"center"}},[n("mu-list",{attrs:{textline:"two-line"}},[n("mu-list-item",{attrs:{avatar:"",ripple:!1,button:""}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.headImg}})])],1),t._v(" "),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.nick))]),t._v(" "),n("mu-list-item-sub-title",[t._v("\n                "+t._s(e.intro?e.intro:"这家伙很懒什么都没说")+"\n              ")])],1)],1)],1)],1),t._v(" "),n("mu-button",{attrs:{slot:"action",flat:"",color:"primary"},on:{click:function(n){t.send(e.id,e.nick,e.headImg)}},slot:"action"},[t._v("\n        发送邀请\n        "),n("mu-icon",{attrs:{left:"",value:"send"}})],1)],1)}))])},staticRenderFns:[]};var j=n("VU/8")(z,O,!1,function(t){n("JSmb")},null,null).exports,L={components:{minor:q},data:function(){return{openAlert:!1,messageGroup:[],todays:[],yesterdays:[],earlier:[],currentItem:{}}},methods:{submit:function(){var t=this,e=this,n=e.$loading({});this.$axios.post("/agreemessage",e.currentItem).then(function(a){a.data.result?e.$toast.success("你们已经是小伙伴啦"):e.$toast.error("网络异常,请重试"),n.close(),t.openAlert=!1}).catch(function(a){e.$toast.error("网络异常,请重试"),console.log(a),n.close(),t.openAlert=!1})},search:function(t){var e=this;e.$axios.get("/getmessage/"+e.currentUser.id+"/"+t+"/100").then(function(t){null!=t.data.result&&(e.messageGroup=e.$linq(t.data.result).groupBy("r=>(r.ctime+'').substring(0,10)").select("{key:$.key(),value:$.toArray()}").toArray())}).catch(function(t){e.$toast.error("网络异常,请重试")})}},computed:d()({},Object(i.b)(["currentUser"]),{isToday:function(){var t=this,e=this.$linq(this.messageGroup).where(function(e){return e.key==t.$format(new Date,"yyyy-MM-dd").substring(0,10)}).toArray();return e.length>0&&(this.todays=e[0].value),e.length>0},isYesterday:function(){var t=this,e=new Date;e.setDate(e.getDate()-1);var n=this.$linq(this.messageGroup).where(function(n){return n.key==t.$format(e,"yyyy-MM-dd").substring(0,10)}).toArray();return n.length>0&&(this.yesterdays=n[0].value),n.length>0},isEarlier:function(){var t=this,e=new Date;e.setDate(e.getDate()-1);var n=this.$linq(this.messageGroup).where(function(n){return new Date(n.key)<new Date(t.$format(e,"yyyy-MM-dd").substring(0,10))}).select(function(t){return t.value}).toArray();return n.forEach(function(e){e.forEach(function(e){t.earlier.push(e)})}),n.length>0}}),watch:{currentUser:function(){this.search(1)}},mounted:function(){}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("minor",{attrs:{title:"消息中心"}},[n("mu-list",{attrs:{textline:"two-line"}},[t.isToday?n("mu-sub-header",[t._v("今天")]):t._e(),t._v(" "),t._l(t.todays,function(e){return n("mu-list-item",{key:e.id,attrs:{avatar:"",ripple:!1,button:""}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.fimg}})])],1),t._v(" "),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.fnick))]),t._v(" "),n("mu-list-item-sub-title",[n("span",{staticStyle:{color:"rgba(0, 0, 0, .87)"}},[t._v("\n            "+t._s(e.content)+"\n          ")])])],1),t._v(" "),n("mu-list-item-action",[n("mu-list-item-after-text",[t._v(t._s(t.$format(e.ctime,"hh:mm")))]),t._v(" "),1==e.type&&1==e.status?n("mu-button",{attrs:{icon:"",color:"primary"},on:{click:function(n){t.openAlert=!0,t.currentItem=e}}},[n("mu-icon",{attrs:{value:"sentiment_satisfied"}})],1):t._e()],1)],1)}),t._v(" "),t.isYesterday?n("div",[n("mu-divider"),t._v(" "),n("mu-sub-header",[t._v("昨天")])],1):t._e(),t._v(" "),t._l(t.yesterdays,function(e){return n("mu-list-item",{key:e.id,attrs:{avatar:"",ripple:!1,button:""}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.fimg}})])],1),t._v(" "),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.fnick))]),t._v(" "),n("mu-list-item-sub-title",[n("span",{staticStyle:{color:"rgba(0, 0, 0, .87)"}},[t._v("\n            "+t._s(e.content)+"\n          ")])])],1),t._v(" "),n("mu-list-item-action",[n("mu-list-item-after-text",[t._v(t._s(t.$format(e.ctime,"hh:mm")))]),t._v(" "),1==e.type&&1==e.status?n("mu-button",{attrs:{icon:"",color:"primary"},on:{click:function(n){t.openAlert=!0,t.currentItem=e}}},[n("mu-icon",{attrs:{value:"sentiment_satisfied"}})],1):t._e()],1)],1)}),t._v(" "),t.isEarlier?n("div",[n("mu-divider"),t._v(" "),n("mu-sub-header",[t._v("更早")])],1):t._e(),t._v(" "),t._l(t.earlier,function(e){return n("mu-list-item",{key:e.id,attrs:{avatar:"",ripple:!1,button:""}},[n("mu-list-item-action",[n("mu-avatar",[n("img",{attrs:{src:e.fimg}})])],1),t._v(" "),n("mu-list-item-content",[n("mu-list-item-title",[t._v(t._s(e.fnick))]),t._v(" "),n("mu-list-item-sub-title",[n("span",{staticStyle:{color:"rgba(0, 0, 0, .87)"}},[t._v("\n            "+t._s(e.content)+"\n          ")])])],1),t._v(" "),n("mu-list-item-action",[n("mu-list-item-after-text",[t._v(t._s(t.$format(e.ctime,"hh:mm")))]),t._v(" "),1==e.type&&1==e.status?n("mu-button",{attrs:{icon:"",color:"primary"},on:{click:function(n){t.openAlert=!0,t.currentItem=e}}},[n("mu-icon",{attrs:{value:"sentiment_satisfied"}})],1):t._e()],1)],1)})],2),t._v(" "),n("mu-dialog",{attrs:{title:"是否同意 ?",width:"75%","max-width":"75%","esc-press-close":!1,"overlay-close":!1,open:t.openAlert},on:{"update:open":function(e){t.openAlert=e}}},[n("span",{staticStyle:{color:"rgba(0,0,0,.87)"}},[t._v(t._s(t.currentItem.fnick)+" - ")]),t._v("\n    "+t._s(t.currentItem.content)+"\n    "),n("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(e){t.openAlert=!1}},slot:"actions"},[t._v("算了")]),t._v(" "),n("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.submit},slot:"actions"},[t._v("没问题")])],1)],1)},staticRenderFns:[]},N=n("VU/8")(L,W,!1,null,null,null).exports;a.a.use(l.a);var G=new l.a({routes:[{path:"/sign",name:"Sign",component:m},{path:"/",name:"Home",component:T},{path:"/tally",name:"Tally",component:P},{path:"/me",name:"Me",component:I},{path:"/addpartner",Name:"AddPartner",component:j},{path:"/message",Name:"Message",component:N}]}),H=n("aFc6");n("E51W");a.a.use(i.a);var J=new i.a.Store({state:{currentUser:{},appbarStyle:""},mutations:{changeUser:function(t,e){t.currentUser=e},changeAppbarStyle:function(t,e){t.appbarStyle=e}},actions:{initUser:function(t,e){var n=t.commit,a=this._vm;a.$axios.get("/getuser/"+localStorage.getItem("token")).then(function(t){t.data.result?n("changeUser",t.data.user):(a.$toast.warning("token失效,稍后将跳转到登陆页面"),t.data&&setTimeout(function(){e.$router.push({path:"/sign"})},1200))}).catch(function(t){console.log(t),a.$toast.error("网络异常, 请重试~")})},sendMessage:function(t,e){t.commit;var n=this._vm,a=n.$loading({});n.$axios.post("/sendmessage",{tid:e.tid,fid:this.state.currentUser.id,content:e.content,needTouch:e.needTouch,type:e.type}).then(function(t){t.data.result?n.$toast.success("已发送"):n.$toast.error("网络异常,请重试"),a.close()}).catch(function(t){n.$toast.error("网络异常,请重试"),a.close(),console.log(t)})}}}),Q=(n("7SuA"),n("mtWM")),Y=n.n(Q),K=n("sXio"),X=(n("0Y+k"),n("1kwf")),Z=n("PrNn"),tt=n.n(Z);a.a.use(H.a),a.a.use(K.a),a.a.use(X.a),Y.a.defaults.baseURL="http://suncheng.xyz:8888",a.a.prototype.$axios=Y.a,a.a.prototype.$linq=tt.a.from,a.a.prototype.$format=function(t,e){var n=new Date(t),a={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return e},a.a.prototype.$numberFormat=function(t){t=(t+"").replace(/[^0-9+-Ee.]/g,"");var e=isFinite(+t)?+t:0,n=isFinite(2)?Math.abs(2):0,a="";a=(n?function(t,e){var n=Math.pow(10,e);return""+Math.floor(t*n)/n}(e,n):""+Math.floor(e)).split(".");for(var i=/(-?\d+)(\d{3})/;i.test(a[0]);)a[0]=a[0].replace(i,"$1,$2");return(a[1]||"").length<n&&(a[1]=a[1]||"",a[1]+=new Array(n-a[1].length+1).join("0")),a.join(".")},a.a.config.productionTip=!1,new a.a({el:"#app",router:G,store:J,components:{App:r},template:"<App/>"})},mcFJ:function(t,e){},tFaw:function(t,e){},x8gK:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0412db00a9e5b90e31a2.js.map