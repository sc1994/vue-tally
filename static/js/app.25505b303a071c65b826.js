webpackJsonp([1],{"095a":function(t,e){},"0Y+k":function(t,e){},"2IRO":function(t,e){},"4JuM":function(t,e){},"6stK":function(t,e){},"7SuA":function(t,e){},Azsr:function(t,e){throw new Error("Module build failed: SyntaxError: Unexpected token (1:9851)\n    at Parser.pp$4.raise (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:2610:13)\n    at Parser.pp.unexpected (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:637:8)\n    at Parser.pp$3.parseExprAtom (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:2094:10)\n    at Parser.parseExprAtom (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:4372:24)\n    at Parser.pp$3.parseExprSubscripts (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1955:19)\n    at Parser.pp$3.parseMaybeUnary (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1932:17)\n    at Parser.pp$3.parseExprOps (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1874:19)\n    at Parser.pp$3.parseMaybeConditional (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1857:19)\n    at Parser.pp$3.parseMaybeAssign (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1832:19)\n    at Parser.pp$3.parsePropertyValue (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:2310:87)\n    at Parser.parseObj (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:4472:14)\n    at Parser.pp$3.parseExprAtom (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:2077:17)\n    at Parser.parseExprAtom (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:4372:24)\n    at Parser.pp$3.parseExprSubscripts (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1955:19)\n    at Parser.pp$3.parseMaybeUnary (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1932:17)\n    at Parser.pp$3.parseExprOps (C:\\Users\\孙诚\\go\\src\\tally\\node_modules\\vue-template-es2015-compiler\\buble.js:1874:19)")},BMKu:function(t,e){},E51W:function(t,e){},F7EM:function(t,e){},Fh1a:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("//Fk"),n=i.n(s),a=i("7+uW"),r=i("NYxO"),o={name:"App",watch:{$route:function(t){"/sign"!=t.path&&this.$store.dispatch("initUser",{$router:this.$router})}},mounted:function(){navigator.userAgent.indexOf("iPhone")>0?this.$store.commit("changeAppbarStyle","top-van-backage-iphone"):this.$store.commit("changeAppbarStyle","top-van-backage-oneplus"),window.document.URL.indexOf("/sign")<0&&this.$store.dispatch("initUser",{$router:this.$router})}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var c=i("VU/8")(o,l,!1,function(t){i("F7EM")},null,null).exports,u=i("/ocq"),h={data:function(){return{active:0,pwdErrorText:"",nameErrorText:"",loginModel:{username:"",password1:"",password2:"",remember:!0},usernameRules:[{validate:function(t){return!!t},message:"必须填写用户名"},{validate:function(t){return t.length>=3},message:"用户名长度大于2"}],passwordRules:[{validate:function(t){return!!t},message:"必须填写密码"},{validate:function(t){return t.length>5},message:"密码长度大于5"}]}},methods:{submit:function(){var t=this;t.$refs.form.validate().then(function(e){if(e)if(1!=t.active||t.loginModel.password1==t.loginModel.password2){if(!(t.nameErrorText.length>0)){var i=t.$loading();t.pwdErrorText="";var s=0==t.active?"/signin":"/signup";t.$axios.post(s,{name:t.loginModel.username,password:t.loginModel.password1,remember:t.loginModel.remember}).then(function(e){e.result?0==t.active?(localStorage.setItem("token",e.token),t.$toast.success("登陆成功, 请稍后..."),setTimeout(function(){t.$router.push({path:"/"})},1200)):(t.$toast.success("注册成功, 请登录"),t.active=0):0==t.active?t.$toast.warning("用户名或者密码错误"):t.$toast.warning("用户名已存在"),i.close()}).catch(function(){i.close()})}}else t.pwdErrorText="两次输入的密码不一致"})},chenkName:function(){var t=this;if(0==t.active||t.loginModel.username.length<3)t.nameErrorText="";else{var e=t.$loading({});t.$axios.get("/signupcheck/"+t.loginModel.username).then(function(i){i.exist&&(t.nameErrorText="已存在的用户名"),e.close()}).catch(function(){e.close()})}}},watch:{active:function(t){this.$refs.form.clear(),this.loginModel.username.length<=2&&(this.loginModel.username=""),this.loginModel.password1="",this.loginModel.password2="",this.loginModel.remember=!0}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mu-container",[i("mu-paper",{staticClass:"head-paper",attrs:{circle:"","z-depth":3}},[i("img",{staticClass:"head-img",attrs:{src:"/static/images/head-default.png"}})]),t._v(" "),i("mu-tabs",{attrs:{value:t.active,inverse:"",color:"#ff4081","text-color":"rgba(0, 0, 0, .54)","full-width":""},on:{"update:value":function(e){t.active=e}}},[i("mu-tab",[t._v("登 陆")]),t._v(" "),i("mu-tab",[t._v("注 册")])],1),t._v(" "),i("mu-form",{ref:"form",staticStyle:{height:"28px","margin-top":"36px"},attrs:{model:t.loginModel}},[i("mu-form-item",{attrs:{label:"用户名",prop:"username",rules:t.usernameRules}},[i("mu-text-field",{attrs:{"error-text":t.nameErrorText,prop:"username"},on:{blur:t.chenkName},model:{value:t.loginModel.username,callback:function(e){t.$set(t.loginModel,"username",e)},expression:"loginModel.username"}})],1),t._v(" "),i("mu-form-item",{attrs:{label:"密码",prop:"password1",rules:t.passwordRules}},[i("mu-text-field",{attrs:{type:"password",prop:"password"},model:{value:t.loginModel.password1,callback:function(e){t.$set(t.loginModel,"password1",e)},expression:"loginModel.password1"}})],1),t._v(" "),1==t.active?i("mu-form-item",{attrs:{label:"确认密码",prop:"password2",rules:t.passwordRules}},[i("mu-text-field",{attrs:{type:"password","error-text":t.pwdErrorText,prop:"password"},model:{value:t.loginModel.password2,callback:function(e){t.$set(t.loginModel,"password2",e)},expression:"loginModel.password2"}})],1):t._e(),t._v(" "),0==t.active?i("mu-form-item",{attrs:{prop:"remember"}},[i("mu-checkbox",{attrs:{label:"记住密码"},model:{value:t.loginModel.remember,callback:function(e){t.$set(t.loginModel,"remember",e)},expression:"loginModel.remember"}})],1):t._e(),t._v(" "),i("mu-form-item",[i("mu-button",{staticStyle:{width:"95%"},attrs:{round:"","full-width":"",color:"primary"},on:{click:t.submit}},[t._v("\n        "+t._s(1==t.active?"注 册":"登 陆")+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var p=i("VU/8")(h,m,!1,function(t){i("BMKu")},"data-v-a0245192",null).exports,d=i("Dd8w"),f=i.n(d),g={props:{lefticon:{type:String},leftevent:{type:Function},letfstyle:{type:String}},data:function(){return{title:"",value:""}},methods:{goto:function(t){this.$router.push({path:t})},init:function(){switch(this.$router.currentRoute.path){case"/":this.title="添加一笔";break;case"/tally":this.title="账单";break;case"/me":this.title="我"}this.value=this.$router.currentRoute.path}},computed:f()({},Object(r.b)(["appbarStyle"])),watch:{$route:function(t){this.init()}},mounted:function(){this.init()}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("mu-appbar",{class:"top-van "+t.appbarStyle,attrs:{title:t.title}},[t.lefticon?i("mu-button",{style:t.letfstyle,attrs:{slot:"left",icon:""},on:{click:t.leftevent},slot:"left"},[i("mu-icon",{attrs:{value:t.lefticon}})],1):t._e(),t._v(" "),i("mu-button",{attrs:{slot:"right",icon:"",flat:""},slot:"right"},[i("i",{staticClass:"fa fa-github",staticStyle:{"font-size":"26px","margin-right":"15px"}})])],1),t._v(" "),i("mu-container",{staticStyle:{position:"absolute",top:"65px"}},[t._t("default"),t._v(" "),i("div",{staticStyle:{height:"70px"}})],2),t._v(" "),i("mu-bottom-nav",{staticClass:"bot-van",attrs:{value:t.value},on:{"update:value":function(e){t.value=e},change:t.goto}},[i("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/",icon:":fa fa-circle-o-notch"}}),t._v(" "),i("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/tally",icon:":fa fa-pie-chart"}}),t._v(" "),i("mu-bottom-nav-item",{staticClass:"bot-font-icon",attrs:{value:"/me",icon:":fa fa-user-circle-o"}})],1)],1)},staticRenderFns:[]};var y=i("VU/8")(g,v,!1,function(t){i("2IRO")},null,null).exports,b=i("4qdD"),_=i.n(b),x={props:{user:{type:Object,required:!0}},data:function(){return{}},watch:{user:function(t){for(var e=[],i=parseInt((t.budget/50).toFixed(0)),s=0;s<=t.budget;s++)s%i==0&&e.push(s);e.push(t.budget);var n=_.a.Shape,a=[{pointer:"\n剩余预算 "+(t.budget-t.haveBeenUsed)+" 元\n\n预支 "+t.haveBeenAdvance+" 元",value:t.haveBeenUsed,length:0,y:1}];n.registerShape("point","dashBoard",{getPoints:function(t){var e=t.x;return[{x:e,y:t.y},{x:e,y:.4}]},draw:function(t,e){var i=t.points[0],s=t.points[1];i=this.parsePoint(i),s=this.parsePoint(s);var n=e.addShape("Polyline",{attrs:{points:[i,s],stroke:"#d84315",lineWidth:2}}),a=t.origin._origin.value.toString();return[n,e.addShape("Text",{attrs:{text:a+" 元",x:t.center.x,y:t.center.y,fill:"#d84315",fontSize:22,textAlign:"center",textBaseline:"bottom"}}),e.addShape("Text",{attrs:{text:t.origin._origin.pointer,x:t.center.x,y:t.center.y,fillStyle:"#ccc",textAlign:"center",textBaseline:"top"}})]}});var r=new _.a.Chart({id:"mountNode",animate:!1,pixelRatio:window.devicePixelRatio});r.source(a,{value:{type:"linear",min:0,max:t.budget,ticks:e,nice:!1},length:{type:"linear",min:0,max:1},y:{type:"linear",min:0,max:1}}),r.coord("polar",{inner:0,startAngle:-1.25*Math.PI,endAngle:.25*Math.PI}),r.axis("value",{tickLine:{strokeStyle:"#ccc",lineWidth:3,length:-6},label:null,grid:null,line:null}),r.axis("y",!1);var o=t.haveBeenUsed-i/3;t.haveBeenUsed>0&&r.guide().arc({start:[10,1.05],end:[o>i?o:i/3,1.05],style:{strokeStyle:"#d84315",lineWidth:4,lineCap:"round"}}),r.guide().arc({start:[t.haveBeenUsed+i/3,1.05],end:[t.budget-10,1.05],style:{strokeStyle:"#1890FF",lineWidth:4,lineCap:"round"}}),r.guide().text({position:[t.budget,1.2],content:t.budget+"",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),r.guide().text({position:[0,1.2],content:"0",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),r.guide().text({position:[t.budget/2,1.16],content:t.budget/2+"",style:{fillStyle:"#ccc",font:"18px Arial",textAlign:"center"}}),r.point().position("value*y").size("length").color("#1890FF").shape("dashBoard"),r.render()}}},S={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{staticStyle:{width:"100%"},attrs:{id:"mountNode",height:"246"}})},staticRenderFns:[]},w=i("VU/8")(x,S,!1,null,null,null).exports,$=i("Gu7T"),C=i.n($),k={props:{title:{type:String},open:{type:Boolean},buttonshow:{type:Boolean},buttonclick:{type:Function},buttonicon:{type:String}},computed:f()({},Object(r.b)(["appbarStyle"]))},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mu-dialog",{attrs:{fullscreen:"",open:t.open},on:{"update:open":function(e){t.open=e}}},[i("mu-appbar",{class:t.appbarStyle,attrs:{title:t.title}},[i("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.$emit("update:open",!1)}},slot:"left"},[i("mu-icon",{attrs:{value:"close"}})],1),t._v(" "),t.buttonshow?i("mu-button",{attrs:{slot:"right",flat:""},on:{click:t.buttonclick},slot:"right"},[i("mu-icon",{attrs:{value:t.buttonicon}})],1):t._e()],1),t._v(" "),i("br"),t._v(" "),t._t("default")],2)},staticRenderFns:[]},U={components:{dialoghead:i("VU/8")(k,F,!1,null,null,null).exports},props:{openTally:{type:Boolean,required:!0},consume:{type:String,required:!0},money:{type:String,required:!0}},data:function(){return{thatOpenTally:!1,thatStep:-1,tallyForm:{mode:"",channel:"",date:"",remark:""},manyType:{channels:[],modes:[{content:"收入"},{content:"支出"},{content:"预支"}],consumes:[]}}},computed:f()({},Object(r.b)(["currentUser"])),methods:{submit:function(){var t=this,e=t.$loading({});t.$axios.post("/inserttally",{token:localStorage.getItem("token"),money:parseFloat(t.money),type:t.consume,mode:t.tallyForm.mode,channel:t.tallyForm.channel,remark:t.tallyForm.remark,ctime:t.tallyForm.date}).then(function(i){i.result?(t.$toast.success("添加成功"),setTimeout(function(){t.$emit("update:openTally",!1),t.thatOpenTally=!1,t.$emit("update:consume",""),t.$emit("update:money","")},1200)):t.$toast.error("网络异常,请重试"),e.close()})}},watch:{currentUser:function(t){this.manyType.channels=[{content:"",default:[]}].concat(C()(t.channels)),this.manyType.consumes=this.$linq(t.consumes).select(function(t){return t.content}).toArray()},thatStep:function(t){var e=this;if(0==t){var i=e.$linq(e.currentUser.consumes).firstOrDefault(function(t){return t.content==e.consume});i&&(e.manyType.modes=e.$linq(e.manyType.modes).select(function(t){return t.hide=i.default.indexOf(t.content)<0,t}).toArray());var s=e.$linq(e.manyType.modes).where(function(t){return!t.hide}).toArray();1==s.length&&(e.thatStep+=1,e.tallyForm.mode=s[0].content)}else if(1==t)e.$linq(e.manyType.channels).select(function(t){return t.hide=t.default.indexOf(e.tallyForm.mode)<0,t}).toArray();else if(2==t){e.tallyForm.date=new Date;var n="收入"==e.tallyForm.mode?"收取":"支付";e.tallyForm.remark=""+e.consume+e.tallyForm.mode+"了"+e.money+"元，通过"+e.tallyForm.channel+n+"。"}},thatOpenTally:function(t){t?this.thatStep=0:(this.thatStep=-1,this.tallyForm={mode:"",channel:"",date:"",remark:""},this.$emit("update:openTally",!1))},openTally:function(t){t&&(this.thatOpenTally=!0)}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dialoghead",{attrs:{title:t.consume+"："+t.money+" 元",open:t.thatOpenTally,buttonshow:2==t.thatStep,buttonclick:t.submit,buttonicon:"done"},on:{"update:open":function(e){t.thatOpenTally=e}}},[i("mu-stepper",{attrs:{"active-step":t.thatStep,orientation:"vertical"}},[i("mu-step",[i("mu-step-label",[t._v("\n        收入/支出/预支\n        "),i("b",[t._v(t._s(t.tallyForm.mode.length>0?" ：":"")+t._s(t.tallyForm.mode))])]),t._v(" "),i("mu-step-content",[i("mu-list",t._l(t.manyType.modes,function(e,s){return e.content.length>0&&!e.hide?i("mu-list-item",{key:s},[i("mu-list-item-content",[i("mu-radio",{attrs:{label:e.content,value:e.content},on:{change:function(e){t.thatStep++}},model:{value:t.tallyForm.mode,callback:function(e){t.$set(t.tallyForm,"mode",e)},expression:"tallyForm.mode"}})],1)],1):t._e()}))],1)],1),t._v(" "),i("mu-step",[i("mu-step-label",[t._v("\n        方式\n        "),i("b",[t._v(t._s(t.tallyForm.channel.length>0?" ：":"")+t._s(t.tallyForm.channel))])]),t._v(" "),i("mu-step-content",[i("mu-list",t._l(t.manyType.channels,function(e,s){return e.content.length>0&&!e.hide?i("mu-list-item",{key:s},[i("mu-list-item-content",[i("mu-radio",{attrs:{label:e.content,value:e.content},on:{change:function(e){t.thatStep++}},model:{value:t.tallyForm.channel,callback:function(e){t.$set(t.tallyForm,"channel",e)},expression:"tallyForm.channel"}})],1)],1):t._e()})),t._v(" "),i("mu-button",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.thatStep--}}},[t._v("上一步")])],1)],1),t._v(" "),i("mu-step",[i("mu-step-label",[t._v("\n        其他\n      ")]),t._v(" "),i("mu-step-content",[i("br"),t._v(" "),i("mu-form",{attrs:{model:t.tallyForm,"label-position":"top","label-width":"70"}},[i("mu-form-item",{attrs:{prop:"date",label:"日期"}},[i("mu-date-input",{staticStyle:{height:"30px"},attrs:{type:"dateTime",actions:""},model:{value:t.tallyForm.date,callback:function(e){t.$set(t.tallyForm,"date",e)},expression:"tallyForm.date"}})],1),t._v(" "),i("mu-form-item",{attrs:{prop:"input",label:"备注"}},[i("mu-text-field",{staticStyle:{height:"30px"},model:{value:t.tallyForm.remark,callback:function(e){t.$set(t.tallyForm,"remark",e)},expression:"tallyForm.remark"}})],1),t._v(" "),i("mu-form-item",[i("mu-button",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.thatStep--}}},[t._v("上一步")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},M={components:{layoutmain:y,residue:w,addtally:i("VU/8")(U,I,!1,null,null,null).exports},data:function(){return{tallyForm:{money:"",consume:""},consumes:[],openTally:!1,tallyList:[],titleWidth:.72*document.body.clientWidth}},methods:{showMode:function(){var t=this;if(!(this.tallyForm.money.length<=0||this.tallyForm.consume.length<=0)){var e=this;setTimeout(function(){e.openTally=!0},220);var i=!1;this.consumes.forEach(function(e){e==t.tallyForm.consume&&(i=!0)}),i||this.currentUser.consumes.push({content:this.tallyForm.consume,count:1,default:["收入","支出","预支"]})}},initLate:function(){var t=this;t.$axios.post("/gettallybyuser",{token:localStorage.getItem("token"),pageIndex:1,pageSize:5}).then(function(e){e.result&&null!=e.body&&(t.tallyList=e.body)})},formatDate:function(t){return this.$format(t,"yyyy-MM-dd hh:mm")},getUserHeadImg:function(t){if(!this.currentUser)return"";if(!this.currentUser.partners)return"";for(var e=0;e<this.currentUser.partners.length;e++)if(this.currentUser.partners[e].id==t)return this.currentUser.partners[e].headImg;return this.currentUser.headImg}},computed:f()({},Object(r.b)(["currentUser"])),watch:{currentUser:function(t){var e=this;this.consumes=[],t.consumes.forEach(function(t){e.consumes.push(t.content)})},openTally:function(t){t||(this.tallyForm={money:"",consume:""},this.initLate(),this.$store.dispatch("initUser",{$router:this.$router}))}},mounted:function(){this.initLate()}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("layoutmain",[i("mu-paper",{staticClass:"paper-title",style:"height:"+t.titleWidth+"px;",attrs:{"z-depth":0}},[i("residue",{attrs:{user:t.currentUser}})],1),t._v(" "),i("mu-paper",{staticStyle:{height:"100px",padding:"10px"},attrs:{"z-depth":1}},[i("mu-text-field",{staticStyle:{height:"80px",width:"50%"},attrs:{label:"金额",prefix:"￥",type:"number","label-float":""},on:{blur:t.showMode},model:{value:t.tallyForm.money,callback:function(e){t.$set(t.tallyForm,"money",e)},expression:"tallyForm.money"}}),t._v(" "),i("mu-auto-complete",{staticStyle:{height:"80px",width:"45%"},attrs:{data:t.consumes,label:"种类","max-search-results":8,"open-on-focus":"","label-float":""},on:{change:t.showMode},model:{value:t.tallyForm.consume,callback:function(e){t.$set(t.tallyForm,"consume",e)},expression:"tallyForm.consume"}})],1),t._v(" "),i("br"),t._v(" "),0!=t.tallyList.length?i("mu-list",[i("mu-sub-header",[t._v("\n      最近消费\n    ")]),t._v(" "),i("mu-divider"),t._v(" "),t._l(t.tallyList,function(e,s){return i("mu-list-item",{key:s,attrs:{avatar:"",ripple:!1}},[i("mu-list-item-action",[i("mu-avatar",[i("img",{attrs:{src:t.getUserHeadImg(e.userID)}})])],1),t._v(" "),i("mu-list-item-content",[i("mu-list-item-title",[t._v(t._s(e.remark))]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.formatDate(e.ctime)))])],1)],1)})],2):t._e(),t._v(" "),i("mu-list",[i("mu-sub-header",[t._v("\n      快速记录\n    ")]),t._v(" "),i("mu-divider"),t._v(" "),i("mu-list-item",{attrs:{avatar:"",button:"",ripple:!0}},[i("mu-list-item-action",{staticStyle:{"text-align":"right"}},[t._v("\n        15 元\n        "),i("br"),t._v(" 微信支出\n      ")]),t._v(" "),i("mu-list-item-title",{staticStyle:{"text-align":"center"}},[t._v("午餐")]),t._v(" "),i("mu-list-item-action",[i("mu-button",{attrs:{icon:"",color:"#4caf50"}},[i("mu-icon",{attrs:{value:"fast_forward"}})],1)],1)],1)],1),t._v(" "),i("addtally",{attrs:{openTally:t.openTally,money:t.tallyForm.money,consume:t.tallyForm.consume},on:{"update:openTally":function(e){t.openTally=e}}})],1)},staticRenderFns:[]};var R=i("VU/8")(M,E,!1,function(t){i("vwGY")},"data-v-66fe46ed",null).exports,T={props:{alert:{type:Boolean,required:!0},user:{type:Object,required:!0},type:{type:String,required:!0}},data:function(){return{thenAlert:this.alert,title:"",value:"",oldValue:"",prefix:"",textType:"number",textError:""}},methods:{submitBase:function(){var t=this,e=this,i=e.$loading(),s={token:localStorage.getItem("token"),id:e.user.id,nick:e.user.nick,budget:parseFloat(e.user.budget),fixDate:parseFloat(e.user.fixDate),wechatPay:parseFloat(e.user.wechatPay),aliPay:parseFloat(e.user.aliPay),backCard:parseFloat(e.user.backCard),cash:parseFloat(e.user.cash)};switch(this.type){case"nick":s.nick=e.value;break;case"budget":s.budget=parseFloat(e.value);break;case"backCard":s.backCard=parseFloat(e.value);break;case"aliPay":s.aliPay=parseFloat(e.value);break;case"wechatPay":s.wechatPay=parseFloat(e.value);break;case"fixDate":s.fixDate=parseFloat(e.value)}e.$axios.post("/setuserbaseinfo",s).then(function(s){s.result?(e.$toast.success("修改成功"),e.$store.dispatch("initUser",{$router:t.$router}),e.thenAlert=!1):e.$toast.warning("修改失败, 请重试"),i.close()}).catch(function(){i.close()})},switchType:function(){switch(this.type){case"nick":this.title="修改昵称",this.oldValue=this.user.nick+"",this.prefix="昵称: ",this.textType="string";break;case"budget":this.title="修改预算",this.oldValue=this.user.budget+"",this.prefix="预算: ";break;case"backCard":this.title="修改银行卡余额",this.oldValue=this.user.backCard+"",this.prefix="银行卡余额: ";break;case"aliPay":this.title="修改支付宝余额",this.oldValue=this.user.aliPay+"",this.prefix="支付宝余额: ";break;case"wechatPay":this.title="修改微信余额",this.oldValue=this.user.wechatPay+"",this.prefix="微信余额: ";break;case"fixDate":this.title="修改定期余额",this.oldValue=this.user.fixDate+"",this.prefix="定期余额: "}}},watch:{thenAlert:function(t){t||this.$emit("update:alert",t)},alert:function(t){t&&(this.switchType(),this.thenAlert=t,this.value="")}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mu-dialog",{attrs:{title:t.title,width:"600","max-width":"80%","esc-press-close":!1,"overlay-close":!1,open:t.thenAlert},on:{"update:open":function(e){t.thenAlert=e}}},[i("mu-text-field",{attrs:{type:t.textType,label:t.oldValue,prefix:t.prefix,"error-text":t.textError,"label-float":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(e){t.thenAlert=!1}},slot:"actions"},[t._v("取消")]),t._v(" "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.submitBase},slot:"actions"},[t._v("保存")])],1)},staticRenderFns:[]};var z=i("VU/8")(T,L,!1,function(t){i("mFa2")},null,null).exports,A=i("woOf"),D=i.n(A),W=i("fZjL"),B=i.n(W),O=i("BO1k"),P=i.n(O),V=i("pFYg"),j=i.n(V),H=i("doje"),q=i.n(H),N=i("HBWp"),Y=i.n(N),X=i("q+yL"),G=i.n(X),K=i("X0k5"),J=i.n(K),Z=i("Wx/i"),Q=i.n(Z),tt=i("TeCL"),et=i.n(tt),it=i("ZKdx"),st=i.n(it),nt={props:{minProgress:{type:[Number,String],default:0}},data:function(){return{progress:100,left:100}},methods:{setProgress:function(t){this.left=t},drag:function(t){t.preventDefault(),t.stopPropagation();var e=t.target;this.el=e;var i=this.$el.parentElement,s=this,n=st.a.isMobile,a={x:(n?t.touches[0].clientX:t.clientX)-e.offsetLeft,y:(n?t.touches[0].clientY:t.clientY)-e.offsetTop,maxLeft:200,maxTop:parseInt(i.style.height)-parseInt(e.style.height),minLeft:0,minTop:0},r=function(t){var e=Q()(t,s.el,a);if(e){if(e.left/200<s.minProgress)return;s.progress=(e.left-100)/200,s.left=e.left/200*100,s.$emit("resize",s.progress)}},o=function t(e){if(s.el=null,n)return document.removeEventListener("touchmove",r,!1),void document.removeEventListener("touchend",t,!1);document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",t,!1)};if(n)return document.addEventListener("touchmove",r,!1),void document.addEventListener("touchend",o,!1);document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",o,!1)}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"g-resize-bar"},[i("div",{staticClass:"g-resize-highlight",style:{width:t.left+"%"}}),t._v(" "),i("button",{staticClass:"circle-btn",style:{left:t.left+"%"},on:{touchstart:function(e){return e.target!==e.currentTarget?null:t.drag(e)},mousedown:function(e){return e.target!==e.currentTarget?null:t.drag(e)}}})])},staticRenderFns:[]};var rt=i("VU/8")(nt,at,!1,function(t){i("4JuM")},"data-v-1aa4051f",null).exports,ot={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"g-rotate-bar"},[e("a",{attrs:{href:"javascript:;"},on:{click:this.rotateLeft}},[e("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 481.95 481.95"}},[e("path",{attrs:{d:"M281.7,243.8V138.2c75.9,13.5,135.4,78.6,135.4,159.8s-59.6,146.3-135.4,159.8V512\n        c105.7-13.5,189.6-102.9,189.6-214s-84-200.5-189.6-214V0L159.8,121.9L281.7,243.8z M94.8,270.9c2.7-24.4,13.5-46.1,27.1-67.7\n        L84,165.2C59.6,197.8,46.1,233,40.6,270.9H94.8z M159.8,430.7l-37.9,37.9c32.5,24.4,67.7,37.9,105.7,43.3v-54.2\n        C203.2,455.1,181.5,444.3,159.8,430.7z M94.8,325.1H40.6c2.7,37.9,19,73.1,43.3,105.7l37.9-37.9\n        C108.4,371.1,97.5,349.5,94.8,325.1z",fill:"#27ae60"}})])]),this._v(" "),e("a",{attrs:{href:"javascript:;"},on:{click:this.rotateRight}},[e("svg",{staticClass:"svg-icon",attrs:{viewBox:"0 0 481.95 481.95"}},[e("path",{attrs:{d:"M331.5,114.75L216.75,0v79.05C117.3,91.8,38.25,175.95,38.25,280.5s79.05,188.7,178.5,201.45v-51    C145.35,418.2,89.25,357,89.25,280.5s56.1-137.7,127.5-150.45v99.45L331.5,114.75z M443.7,255    c-5.101-35.7-17.851-68.85-40.8-99.45l-35.7,35.7c12.75,20.4,22.95,40.8,25.5,63.75H443.7z M267.75,430.95v51    c35.7-5.101,68.85-17.851,99.45-40.8l-35.7-35.7C311.1,418.2,290.7,428.4,267.75,430.95z M367.2,369.75l35.7,35.7    c22.949-30.601,38.25-63.75,40.8-99.45h-51C390.15,328.95,379.95,349.35,367.2,369.75z",fill:"#27ae60"}})])])])},staticRenderFns:[]};var lt=i("VU/8")({data:function(){return{rotateDegree:0}},methods:{rotateRight:function(){this.rotateDegree+=90,this.$emit("rotate",this.rotateDegree)},rotateLeft:function(){this.rotateDegree-=90,this.$emit("rotate",this.rotateDegree)}}},ot,!1,function(t){i("qe9c")},null,null).exports,ct=(st.a.isMobile,window.innerWidth-60),ut=window.innerHeight-110,ht={components:{ResizeBar:rt,RotateBar:lt},props:{ratio:{type:String,default:"1:1"},minWidth:{type:Number,default:50},minHeight:{type:Number,default:50},isResize:{type:[Boolean],default:!1},isRotate:{type:[Boolean],default:!0}},data:function(){return{src:Y.a,width:24,height:24,initWidth:24,initHeight:24,left:0,top:0,cropCSS:{}}},methods:{setImage:function(t,e,i){this.src=t,this.originSrc||this.setOriginalSrc(this.src),this.ratio.indexOf(":")>0?(this.ratioW=this.ratio.split(":")[0],this.ratioH=this.ratio.split(":")[1],this.ratioVal=this.ratioW/this.ratioH):(this.ratioW=1,this.ratioH=1,this.ratioVal=this.ratio),this.natrualWidth=e,this.natrualHeight=i,this.setLayout(e,i);var s=this.$refs.resizeBar;return this.isResize?s.setProgress(100):s.setProgress(50),this.imgChangeRatio},setOriginalSrc:function(t){this.originSrc=t},resizeImage:function(t){var e=void 0,i=void 0;this.isResize?(e=this.natrualWidth*this.imgChangeRatio*t,i=this.natrualHeight*this.imgChangeRatio*t):(e=this.initWidth+t*(this.natrualWidth-this.initWidth),i=this.initHeight+t*(this.natrualHeight-this.initHeight)),e<=this.minWidth||i<this.minHeight||(this.left+=(this.width-e)/2,this.top+=(this.height-i)/2,this.width=e,this.height=i,this.imgChangeRatio=this.width/this.natrualWidth)},rotateImage:function(t){var e=this;G.a.rotate2(this.originSrc,t,function(t,i,s){e.setImage(t,i,s)})},setLayout:function(t,e){var i=t,s=e,n=0,a=i/s;a>ct/ut?(s=ut,i=ut*a,n=(ct-ut*a)/2):(i=ut*a,s=ut,n=(ct-ut*a)/2),this._setStyle(i,s,n,0,a,!0)},_setStyle:function(t,e,i,s,n,a){var r=this.$el.querySelector(".g-crop-image-principal");a||(this.marginLeft=this.marginLeft+(this.width-t)/2,this.marginTop=this.marginTop+(this.height-e)/2),r.style.cssText="width:"+t+"px;height:"+e+"px;margin-left:"+i+"px;margin-top:"+s+"px",this.setCropBox(t,e),this.isResize?(this.width=t,this.height=e):(n>=this.cropCSS.width/this.cropCSS.height?(this.height=this.cropCSS.height,this.width=this.height*n):(this.width=this.cropCSS.width,this.height=this.width/n),this.initWidth=this.width,this.initHeight=this.height,this.left=(t-this.width)/2,this.top=(e-this.height)/2),this.imgChangeRatio=this.width/this.natrualWidth},setCropBox:function(t,e,i){if(!this.isResize){var s=this.__find(".crop-box"),n=(this.$el,t),a=e,r=this.ratioW,o=this.ratioH,l=n;ct<t&&(l=ct);var c=l/100*75,u={width:c,height:c/r*o};if(u.left=(n-c)/2,u.top=(a-u.height)/2,s.style.cssText=st.a.setCssText(u),u.height>a){var h=a/100*75;u.height=h,u.width=u.height*r/o,u.left=(n-u.width)/2,u.top=(a-u.height)/2,s.style.cssText=st.a.setCssText(u)}this.cropCSS=u}},getCropData:function(){return this.isResize?{imgChangeRatio:this.imgChangeRatio,toCropImgX:0,toCropImgY:0,toCropImgW:this.natrualWidth,toCropImgH:this.natrualHeight}:{toCropImgX:(this.cropCSS.left-this.left)/this.imgChangeRatio,toCropImgY:(this.cropCSS.top-this.top)/this.imgChangeRatio,toCropImgW:this.cropCSS.width/this.imgChangeRatio,toCropImgH:this.cropCSS.height/this.imgChangeRatio}},getCropImage:function(){return this.$refs["crop-image"]},__find:function(t){return this.$el.querySelector(t)},resize:function(t){if(t.stopPropagation(),this.ratio.indexOf(":")){var e=t.target.parentElement,i=this.__find(".g-crop-image-principal");this._$container&&(this._$container=container);var s=this,n={x:st.a.isMobile?t.touches[0].clientX:t.clientX,y:st.a.isMobile?t.touches[0].clientY:t.clientY,w:e.offsetWidth,h:e.offsetHeight};this.el=e,this.container=i;var a=this._getMaxCropAreaWidth(),r=function(t){var e=et()(t,s.el,i,n,s.ratioVal);e&&(e.width<=a.maxWidth||e.height<=a.maxHeight)&&(s.cropCSS.width=e.width,s.cropCSS.height=e.height)},o=function t(e){this.el=null,st.a.isMobile&&(document.removeEventListener("touchmove",r,!1),document.removeEventListener("touchend",t,!1)),document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",t,!1)};st.a.isMobile&&(document.addEventListener("touchmove",r,!1),document.addEventListener("touchend",o,!1)),document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",o,!1)}},_getMaxCropAreaWidth:function(){this.__find(".crop-box");return this.width>this.height?{maxWidth:this.height*this.ratioW/this.ratioH,maxHeight:this.height}:{maxWidth:this.width,maxHeight:this.width*this.ratioH/this.ratioW}},drag:function(t){t.preventDefault();var e=this.__find(".image-wrap");this.el=e;var i=this.__find(".crop-box"),s=(t.currentTarget,this),n=st.a.isMobile,a={x:(n?t.touches[0].clientX:t.clientX)-e.offsetLeft,y:(n?t.touches[0].clientY:t.clientY)-e.offsetTop,maxLeft:i.offsetLeft,maxTop:i.offsetTop,minLeft:i.offsetWidth+i.offsetLeft-e.offsetWidth,minTop:i.offsetHeight+i.offsetTop-e.offsetHeight},r=function(t){var e=Q()(t,s.el,a);e&&(s.left=e.left,s.top=e.top)},o=function t(e){if(s.el=null,n)return document.removeEventListener("touchmove",r,!1),void document.removeEventListener("touchend",t,!1);document.removeEventListener("mousemove",r,!1),document.removeEventListener("mouseup",t,!1)};if(n)return document.addEventListener("touchmove",r,!1),void document.addEventListener("touchend",o,!1);document.addEventListener("mousemove",r,!1),document.addEventListener("mouseup",o,!1)}}},mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"image-aside"},[i("div",{staticClass:"g-crop-image-box"},[i("div",{staticClass:"g-crop-image-principal",on:{touchstart:t.drag,mousedown:t.drag}},[i("div",{staticClass:"image-wrap",style:{width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px",backgroundImage:"url("+t.src+")",cursor:t.isResize?"default":"move"}},[i("img",{ref:"crop-image",staticStyle:{width:"0",height:"0"},attrs:{src:t.src}})]),t._v(" "),t.isResize?t._e():i("div",{staticClass:"image-mask"},[i("div",{staticClass:"mask top",style:{top:0,height:t.cropCSS.top+"px",left:0,width:"100%"}}),t._v(" "),i("div",{staticClass:"mask bottom",style:{bottom:0,top:t.cropCSS.top+t.cropCSS.height+"px",left:0,width:"100%"}}),t._v(" "),i("div",{staticClass:"mask left",style:{top:t.cropCSS.top+"px",height:t.cropCSS.height+"px",left:0,width:t.cropCSS.left+"px"}}),t._v(" "),i("div",{staticClass:"mask right",style:{top:t.cropCSS.top+"px",height:t.cropCSS.height+"px",left:t.cropCSS.left+t.cropCSS.width+"px",right:0}})]),t._v(" "),t.isResize?t._e():i("div",{staticClass:"crop-box",style:{top:t.cropCSS.top+"px",left:t.cropCSS.left+"px",height:t.cropCSS.height+"px",width:t.cropCSS.width+"px"}},[i("div",{staticClass:"reference-line v"}),t._v(" "),i("div",{staticClass:"reference-line h"}),t._v(" "),i("a",{staticClass:"g-resize",on:{touchstart:function(e){return e.target!==e.currentTarget?null:t.resize(e)},mousedown:function(e){return e.target!==e.currentTarget?null:t.resize(e)}}})])]),t._v(" "),t.resize?i("resize-bar",{ref:"resizeBar",on:{resize:t.resizeImage}}):t._e(),t._v(" "),t.isRotate?i("rotate-bar",{on:{rotate:t.rotateImage}}):t._e()],1)])},staticRenderFns:[]};var pt="",dt={components:{Crop:i("VU/8")(ht,mt,!1,function(t){i("tBds")},"data-v-7b46bf16",null).exports,ResizeBar:rt},props:J.a,data:function(){return{files:[],hasImage:!1,options:this.props,uploading:!1,formID:(1e4*Math.random()+"").split(".")[0],image:{src:Y.a,width:24,height:24,minProgress:.05}}},computed:{name:function(){return this.multiple?this.inputOfFile+"[]":this.inputOfFile}},methods:{__dispatch:function(t,e,i){this.$emit&&this.$emit(t,e,i)},__find:function(t){return document.querySelector("#vciu-modal-"+this.formID).querySelector(t)},dragover:function(){this.$refs.container.classList.add("is-dragover")},dragleave:function(){this.$refs.container.classList.remove("is-dragover")},change:function(t){var e,i=this,s=document.querySelector("#g-core-upload-input-"+this.formID).value.replace(/C:\\fakepath\\/i,""),n=s.substring(s.lastIndexOf(".")+1),a=this.extensions.split(",");if(a.length>1&&!new RegExp("^["+a.join("|")+"]+$","i").test(n))return this.__dispatch("errorhandle","TYPE ERROR");return t.target.files[0].size>this.maxFileSize?(e=parseInt(this.maxFileSize/1024/1024)>0?(this.maxFileSize/1024/1024).toFixed(2)+"MB":parseInt(this.maxFileSize/1024)>0?(this.maxFileSize/1024).toFixed(2)+"kB":options.maxFileSize.toFixed(2)+"Byte",console.warn("FILE IS TOO LARGER MAX FILE IS "+e),this.__dispatch("errorhandle","FILE IS TOO LARGER MAX FILE IS "+e)):this.multipleSize>0&&t.target.files.length>this.multipleSize?(console.warn("FILE NUM IS LARGER THAN "+this.multipleSize),this.__dispatch("errorhandle","FILE NUM OVERLOAD")):(this.files=t.target.files,void(this.crop||this.resize?this.__showImage():(this.__dispatch("imagechanged",this.files.length>1?this.files:this.files[0]),this.compress&&"image/png"!==this.files[0].type&&"image/gif"!==this.files[0].type?G.a.compress(this.files[0],100-this.compress,function(t){i.tryAjaxUpload("",!0,t)}):this.tryAjaxUpload())))},__showImage:function(){this.hasImage=!0,this.__readFiles()},__readFiles:function(){var t=new FileReader,e=this;t.onload=function(t){var i=t.target.result;pt=document.body.style.overflow,document.body.style.overflow="hidden",e.__initImage(i)},t.readAsDataURL(this.files[0])},__initImage:function(t){var e=new Image,i=this;e.src=t;var s=this.$refs.cropBox;e.onload=function(){i.image.minProgress=i.minWidth/e.naturalWidth,G.a.init(t,function(t){i.imgChangeRatio=s.setImage(t,e.naturalWidth,e.naturalHeight)})}},resizeImage:function(t){this.$refs.cropBox.resizeImage(t)},doRotate:function(t){var e=this,i=this.$refs.cropBox.getCropImage();return this.data.compress=100-this.compress,G.a.rotate(i,1,function(t){e.__initImage(t)})},doReverseRotate:function(t){var e=this,i=this.$refs.cropBox.getCropImage();return this.data.compress=100-this.compress,G.a.rotate(i,-1,function(t){e.__initImage(t)})},doCrop:function(t){var e=this;this.__setData("crop");var i=this.$refs.cropBox,s=this.__setUpload(t.target);if("local"===this.crop){var n=i.getCropImage();return this.data.compress=100-this.compress,G.a.crop(n,this.data,function(t){s(t),e.__dispatch("imagechanged",t)})}s()},doResize:function(t){var e=this;this.__setData("resize");var i=this.$refs.cropBox,s=this.__setUpload(t.target);if("local"===this.resize){var n=i.getCropImage();return this.data.compress=100-this.compress,G.a.resize(n,this.data,function(t){s(t),e.__dispatch("imagechanged",t)})}s()},__setData:function(t){"object"!==j()(this.data)&&(this.data={}),this.data.request=t;var e=this.$refs.cropBox.getCropData(),i=!0,s=!1,n=void 0;try{for(var a,r=P()(B()(e));!(i=(a=r.next()).done);i=!0){var o=a.value;this.data[o]=e[o]}}catch(t){s=!0,n=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}this.maxWidth&&(this.data.maxWidth=this.maxWidth),this.maxHeight&&(this.data.maxHeight=this.maxHeight),this.minWidth&&(this.data.minWidth=this.minWidth)},__setUpload:function(t){var e=this;t.value=t.value+"...",t.disabled=!0;return function(i){e.tryAjaxUpload(function(){t.value=t.value.replace("...",""),t.disabled=!1},!!i,i)}},cancel:function(){this.hasImage=!1,document.body.style.overflow=pt,this.files="",this.$refs.cropBox.setOriginalSrc(null),document.querySelector("#g-core-upload-input-"+this.formID).value=""},tryAjaxUpload:function(t,e,i){var s=this;this.__dispatch("imageuploading",this.files[0]);if(!this.isXhr)return this.crop&&(this.hasImage=!1),"function"==typeof t&&t();var n=void 0;if(e)n={type:this.files[0].type,filename:this.files[0].name,filed:this.inputOfFile,base64Code:i},"object"===j()(this.data)&&(n=D()(this.data,n));else{n=new FormData;for(var a=0;a<this.files.length;a++)n.append(this.name,this.files[a]);if("object"===j()(this.data))for(var r in this.data)void 0!==this.data[r]&&n.append(r,this.data[r])}q()("POST",this.url,this.headers,n,function(e){"function"==typeof t&&t(),s.uploading=!1,s.cancel(),s.__dispatch("imageuploaded",e,s.data)},function(t){s.__dispatch("errorhandle",t)},e,this.credentials)}}},ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"g-core-image-upload-btn"},[t._t("default",[t._v(t._s(t.text))]),t._v(" "),i("form",{directives:[{name:"show",rawName:"v-show",value:!t.hasImage,expression:"!hasImage"}],staticClass:"g-core-image-upload-form",attrs:{method:"post",enctype:"multipart/form-data",action:""}},[i("input",{staticStyle:{width:"100%",height:"100%"},attrs:{disabled:t.uploading,id:"g-core-upload-input-"+t.formID,name:t.name,multiple:t.multiple,type:"file",accept:t.inputAccept},on:{change:t.change,dragover:t.dragover,dragenter:t.dragover,dragleave:t.dragleave,dragend:t.dragleave,drop:t.dragleave}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasImage,expression:"hasImage"}],staticClass:"g-core-image-corp-container",attrs:{id:"vciu-modal-"+t.formID}},[i("crop",{ref:"cropBox",attrs:{"is-resize":t.resize&&!t.crop,ratio:t.cropRatio,"is-rotate":t.rotate}}),t._v(" "),i("div",{staticClass:"info-aside"},[i("p",{staticClass:"btn-groups rotate-groups",staticStyle:{display:"none"}},[i("button",{staticClass:"btn btn-rotate",attrs:{type:"button"},on:{click:t.doRotate}},[t._v("↺")]),t._v(" "),i("button",{staticClass:"btn btn-reverserotate",attrs:{type:"button"},on:{click:t.doReverseRotate}},[t._v("↻")])]),t._v(" "),t.crop?i("p",{staticClass:"btn-groups"},[i("button",{staticClass:"btn btn-upload",attrs:{type:"button"},on:{click:t.doCrop}},[t._v(t._s(t.cropBtn.ok))]),t._v(" "),i("button",{staticClass:"btn btn-cancel",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.cropBtn.cancel))])]):t._e(),t._v(" "),t.resize&&!t.crop?i("p",{staticClass:"btn-groups"},[i("button",{staticClass:"btn btn-upload",attrs:{type:"button"},on:{click:t.doResize}},[t._v(t._s(t.ResizeBtn.ok))]),t._v(" "),i("button",{staticClass:"btn btn-cancel",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.ResizeBtn.cancel))])]):t._e()])],1)],2)},staticRenderFns:[]};var gt={components:{setuserbaseinfo:z,layoutmain:y,vuecoreimageupload:i("VU/8")(dt,ft,!1,function(t){i("095a")},null,null).exports},data:function(){return{open:"",baseInfo:{alert:!1,type:""},addpartnerOpen:!1,messageUnreadCount:0,openMessage:!1,uploadUrl:this.$fileUrl,uploadData:{id:"",fileName:"head-image-"+(new Date).getMilliseconds()}}},computed:f()({},Object(r.b)(["currentUser"])),methods:{loginOut:function(){var t=this;t.$axios.get("/removetoken/"+localStorage.getItem("token")).then(function(){localStorage.clear(),alert("已退出登陆"),t.$router.push({path:"/sign"})})},openBaseInfoSet:function(t){this.baseInfo={alert:!0,type:t}},openUpload:function(){document.getElementsByName("files")[0].click()},uploaded:function(t){if(t.result){this.currentUser.headImg=t.path;var e=this;this.$axios.post("/setuserheadimage",{id:this.currentUser.id,headImg:this.currentUser.headImg}).then(function(t){t.result||e.$toast.error("出现错误")})}}},watch:{currentUser:function(t){var e=this;e.$axios.get("/getmessageunreadcount/"+t.id).then(function(t){e.messageUnreadCount=t.result}),this.uploadData.id=this.currentUser.id}},mounted:function(){}},vt=i("Azsr");var yt=function(t){i("6stK")},bt=i("VU/8")(gt,vt.default,!1,yt,null,null).exports,_t={components:{layoutmain:y},data:function(){return{open:!1,list:[],loading:!1,pageIndex:1,notNextList:!1}},methods:{load:function(){this.notNextList||(console.log("下拉刷新"),this.getList(this.pageIndex))},getList:function(t){var e=this;e.loading=!0,e.$axios.post("/gettallybyuser",{token:localStorage.getItem("token"),pageIndex:e.pageIndex,pageSize:12}).then(function(t){if(t.result){var i;if(null!=t.body)e.pageIndex++,(i=e.list).push.apply(i,C()(t.body)),t.body.length<12&&(e.notNextList=!0);else e.notNextList=!0;e.loading=!1}})},getUserHeadImg:function(t){if(!this.currentUser)return"";if(!this.currentUser.partners)return"";for(var e=0;e<this.currentUser.partners.length;e++)if(this.currentUser.partners[e].id==t)return this.currentUser.partners[e].headImg;return this.currentUser.headImg}},computed:f()({},Object(r.b)(["currentUser"])),mounted:function(){this.getList(this.pageIndex)}},xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("layoutmain",{attrs:{lefticon:"toc",leftevent:function(){return t.open=!t.open},letfstyle:t.open?"":"transform:rotate(180deg);"}},[i("mu-container",{ref:"container"},[i("mu-load-more",{attrs:{loading:t.loading},on:{load:t.load}},[i("mu-list",[t._l(t.list,function(e,s){return[i("mu-list-item",{key:s,attrs:{avatar:"",ripple:!1}},[i("mu-list-item-action",[i("mu-avatar",[i("img",{attrs:{src:t.getUserHeadImg(e.userID)}})])],1),t._v(" "),i("mu-list-item-content",[i("mu-list-item-title",[t._v(t._s(e.remark))]),t._v(" "),i("mu-list-item-sub-title",[t._v(t._s(t.$format(e.ctime,"yyyy-MM-dd hh:mm")))])],1)],1),t._v(" "),i("mu-divider")]})],2)],1)],1),t._v(" "),i("mu-drawer",{staticStyle:{top:"55px","border-radius":"0px"},attrs:{open:t.open,letf:"",docked:!1,"z-depth":0},on:{"update:open":function(e){t.open=e}}},[i("mu-list",[i("mu-list-item",{attrs:{button:""}},[i("mu-list-item-action",[i("i",{staticClass:"fa fa-pie-chart",staticStyle:{"font-size":"20px"}})]),t._v(" "),i("mu-list-item-title",[t._v("资产配置")])],1),t._v(" "),i("mu-list-item",{attrs:{button:""}},[i("mu-list-item-action",[i("i",{staticClass:"fa fa-bar-chart",staticStyle:{"font-size":"20px"}})]),t._v(" "),i("mu-list-item-title",[t._v("柱状图统计")])],1),t._v(" "),i("mu-list-item",{attrs:{button:""}},[i("mu-list-item-action",[i("i",{staticClass:"fa fa-area-chart",staticStyle:{"font-size":"20px"}})]),t._v(" "),i("mu-list-item-title",[t._v("消费折线图")])],1),t._v(" "),i("mu-list-item",{attrs:{button:""}},[i("mu-list-item-action",[i("i",{staticClass:"fa fa-location-arrow",staticStyle:{"font-size":"20px"}})]),t._v(" "),i("mu-list-item-title",[t._v("费用去向")])],1)],1)],1)],1)},staticRenderFns:[]};var St=i("VU/8")(_t,xt,!1,function(t){i("hazr")},null,null).exports,wt={props:{righticon:{type:String},rightevent:{type:Function,default:function(){}},title:{type:String}},computed:f()({},Object(r.b)(["appbarStyle"]))},$t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("mu-appbar",{class:"top-van "+t.appbarStyle},[i("mu-button",{attrs:{slot:"left",icon:""},on:{click:function(e){t.$router.back(-1)}},slot:"left"},[i("mu-icon",{attrs:{value:"reply",left:""}})],1),t._v(" "),i("mu-button",{attrs:{slot:"right",icon:"",flat:""},on:{click:t.rightevent},slot:"right"},[t.righticon?i("mu-icon",{attrs:{value:t.righticon,left:""}}):t._e()],1),t._v("\n    "+t._s(t.title)+"\n  ")],1),t._v(" "),i("mu-container",{staticStyle:{position:"absolute",top:"65px"}},[t._t("default")],2)],1)},staticRenderFns:[]};var Ct=i("VU/8")(wt,$t,!1,function(t){i("Fh1a")},null,null).exports,kt={components:{minor:Ct},data:function(){return{searchValue:"",panel:"",oldSearchValue:[],list:[],searching:!1}},methods:{toggle:function(t){this.panel=t===this.panel?"":t},send:function(t,e,i){this.$store.dispatch("sendMessage",{tid:t,fid:this.currentUser.id,content:"向你发送了添加小伙伴的邀请",needTouch:!0,type:1})},search:function(){var t=this;t.searching=!0,t.$axios.get("/findusersbyname/"+t.searchValue).then(function(e){if(null!=e.result){var i=t.$linq(t.currentUser.partners).select(function(t){return t.id}).toArray();t.list=t.$linq(e.result).where(function(e){return i.indexOf(e.id)<0&&t.currentUser.id!=e.id}).toArray(),t.list.length<1&&t.$toast.info("可能你们已经是小伙伴了")}else t.list=[],t.$toast.info("查无结果~~~");t.oldSearchValue=[],t.searching=!1}).catch(function(){t.searching=!1})}},watch:{searchValue:function(t){var e=this;e.oldSearchValue.push(t),setTimeout(function(i){e.oldSearchValue.length>0&&t==e.oldSearchValue[e.oldSearchValue.length-1]&&(t?e.search():e.list=[])},500)}},computed:f()({},Object(r.b)(["currentUser"]))},Ft={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("minor",{attrs:{title:"添加小伙伴"}},[i("div",{staticStyle:{padding:"24px"}},[i("mu-text-field",{staticStyle:{width:"100%"},attrs:{label:"搜索对方的账号","action-icon":t.searching?"autorenew":"search"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),i("br")],1),t._v(" "),i("div",{staticStyle:{padding:"0px 9px","margin-top":"-21px"}},t._l(t.list,function(e){return i("mu-expansion-panel",{key:e.id,attrs:{expand:t.panel===e.name},on:{change:function(i){t.toggle(e.name)}}},[i("div",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(e.name))]),t._v(" "),i("mu-flex",{attrs:{"align-items":"center"}},[i("mu-list",{attrs:{textline:"two-line"}},[i("mu-list-item",{attrs:{avatar:"",ripple:!1,button:""}},[i("mu-list-item-action",[i("mu-avatar",[i("img",{attrs:{src:e.headImg}})])],1),t._v(" "),i("mu-list-item-content",[i("mu-list-item-title",[t._v(t._s(e.nick))]),t._v(" "),i("mu-list-item-sub-title",[t._v("\n                "+t._s(e.intro?e.intro:"这家伙很懒什么都没说")+"\n              ")])],1)],1)],1)],1),t._v(" "),i("mu-button",{attrs:{slot:"action",flat:"",color:"primary"},on:{click:function(i){t.send(e.id,e.nick,e.headImg)}},slot:"action"},[t._v("\n        发送邀请\n        "),i("mu-icon",{attrs:{left:"",value:"send"}})],1)],1)}))])},staticRenderFns:[]};var Ut=i("VU/8")(kt,Ft,!1,function(t){i("Wslx")},null,null).exports,It={props:{list:{type:Array,default:[]}},computed:{title:function(){if(this.list.length<1)return"";var t=new Date;return(this.list[0].ctime+"").substring(0,10)==this.$format(t,"yyyy-MM-dd").substring(0,10)?"今天":(t.setDate(t.getDate()-1),(this.list[0].ctime+"").substring(0,10)==this.$format(t,"yyyy-MM-dd").substring(0,10)?"昨天":(t.setDate(t.getDate()-1),(this.list[0].ctime+"").substring(0,10)==this.$format(t,"yyyy-MM-dd").substring(0,10)?"更早":void 0))}}},Mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.list.length>0?i("mu-list",{attrs:{textline:"two-line"}},[i("mu-sub-header",[t._v(t._s(t.title))]),t._v(" "),t._l(t.list,function(e){return i("mu-list-item",{key:e.id,attrs:{avatar:"",ripple:!1,button:""}},[i("mu-list-item-action",[i("mu-avatar",[i("img",{attrs:{src:e.fimg}})])],1),t._v(" "),i("mu-list-item-content",[i("mu-list-item-title",[t._v(t._s(e.fnick))]),t._v(" "),i("mu-list-item-sub-title",[i("span",{staticStyle:{color:"rgba(0, 0, 0, .87)"}},[t._v("\n          "+t._s(e.content)+"\n        ")])])],1),t._v(" "),i("mu-list-item-action",[i("mu-list-item-after-text",[t._v(t._s(t.$format(e.ctime,"hh:mm")))]),t._v(" "),1==e.type&&1==e.status?i("mu-button",{attrs:{icon:"",color:"primary"},on:{click:function(i){t.openAlert=!0,t.currentItem=e}}},[i("mu-icon",{attrs:{value:"sentiment_satisfied"}})],1):t._e(),t._v(" "),e.needTouch||1!=e.status?t._e():i("mu-button",{attrs:{icon:"",color:"error",ripple:!1}},[i("mu-icon",{attrs:{value:"lens",size:1}})],1)],1)],1)}),t._v(" "),"更早"!=t.title?i("mu-divider"):t._e()],2):t._e()},staticRenderFns:[]},Et={components:{minor:Ct,messagelist:i("VU/8")(It,Mt,!1,null,null,null).exports},data:function(){return{openAlert:!1,messageGroup:[],currentItem:{},righticon:""}},methods:{submit:function(){var t=this,e=this,i=e.$loading({});this.$axios.post("/agreemessage",e.currentItem).then(function(s){s.result?e.$toast.success("你们已经是小伙伴啦"):e.$toast.error("网络异常,请重试"),i.close(),t.openAlert=!1}).catch(function(){i.close(),t.openAlert=!1})},search:function(t){var e=this;e.$axios.get("/getmessage/"+e.currentUser.id+"/"+t+"/100").then(function(t){null!=t.result&&(e.righticon=e.$linq(t.result).where(function(t){return!t.needTouch&&1==t.status}).toArray().length>0?"done_all":""),e.messageGroup=e.$linq(t.result).groupBy("r=>(r.ctime+'').substring(0,10)").select("{key:$.key(),value:$.toArray()}").toArray()})},readlyAll:function(){var t=this,e=t.$loading();t.$axios.get("/readmessageall/"+t.currentUser.id).then(function(i){i.result&&(t.$toast.success("无需确认的消息, 已标记为已读"),t.$router.back(-1)),e.close()}).catch(function(t){e.close()})}},computed:f()({},Object(r.b)(["currentUser"]),{todays:function(){var t=this,e=this.$linq(this.messageGroup).where(function(e){return e.key==t.$format(new Date,"yyyy-MM-dd").substring(0,10)}).toArray();return e.length>0?e[0].value:[]},yesterdays:function(){var t=this,e=new Date;e.setDate(e.getDate()-1);var i=this.$linq(this.messageGroup).where(function(i){return i.key==t.$format(e,"yyyy-MM-dd").substring(0,10)}).toArray();return i.length>0?i[0].value:[]},earlier:function(){var t=this,e=new Date;e.setDate(e.getDate()-1);var i=[];return this.$linq(this.messageGroup).where(function(i){return new Date(i.key)<new Date(t.$format(e,"yyyy-MM-dd").substring(0,10))}).select(function(t){return t.value}).toArray().forEach(function(t){t.forEach(function(t){i.push(t)})}),i}}),watch:{currentUser:function(){this.search(1)}},mounted:function(){}},Rt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("minor",{attrs:{title:"消息中心",righticon:t.righticon,rightevent:t.readlyAll}},[i("messagelist",{attrs:{list:t.todays}}),t._v(" "),i("messagelist",{attrs:{list:t.yesterdays}}),t._v(" "),i("messagelist",{attrs:{list:t.earlier}}),t._v(" "),i("mu-dialog",{attrs:{title:"是否同意 ?",width:"75%","max-width":"75%","esc-press-close":!1,"overlay-close":!1,open:t.openAlert},on:{"update:open":function(e){t.openAlert=e}}},[i("span",{staticStyle:{color:"rgba(0,0,0,.87)"}},[t._v(t._s(t.currentItem.fnick)+" - ")]),t._v("\n    "+t._s(t.currentItem.content)+"\n    "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:function(e){t.openAlert=!1}},slot:"actions"},[t._v("算了")]),t._v(" "),i("mu-button",{attrs:{slot:"actions",flat:"",color:"primary"},on:{click:t.submit},slot:"actions"},[t._v("没问题")])],1)],1)},staticRenderFns:[]},Tt=i("VU/8")(Et,Rt,!1,null,null,null).exports;a.a.use(u.a);var Lt=new u.a({routes:[{path:"/sign",name:"Sign",component:p},{path:"/",name:"Home",component:R},{path:"/tally",name:"Tally",component:St},{path:"/me",name:"Me",component:bt},{path:"/addpartner",Name:"AddPartner",component:Ut},{path:"/message",Name:"Message",component:Tt}]}),zt=i("aFc6");i("E51W");a.a.use(r.a);var At=new r.a.Store({state:{currentUser:{},appbarStyle:""},mutations:{changeUser:function(t,e){t.currentUser=e},changeAppbarStyle:function(t,e){t.appbarStyle=e}},actions:{initUser:function(t,e){var i=t.commit,s=this._vm;s.$axios.get("/getuser/"+localStorage.getItem("token")).then(function(t){t.result?i("changeUser",t.user):(s.$toast.warning("token失效,稍后将跳转到登陆页面"),t&&setTimeout(function(){e.$router.push({path:"/sign"})},1200))})},sendMessage:function(t,e){t.commit;var i=this._vm,s=i.$loading({});i.$axios.post("/sendmessage",{tid:e.tid,fid:this.state.currentUser.id,content:e.content,needTouch:e.needTouch,type:e.type}).then(function(t){t.result?i.$toast.success("已发送"):i.$toast.error("网络异常,请重试"),s.close()})}}}),Dt=(i("7SuA"),i("mtWM")),Wt=i.n(Dt),Bt=i("sXio"),Ot=(i("0Y+k"),i("1kwf")),Pt=i("PrNn"),Vt=i.n(Pt);a.a.use(zt.a),a.a.use(Bt.a),a.a.use(Ot.a),Wt.a.defaults.baseURL="http://suncheng.xyz:8888",Wt.a.interceptors.response.use(function(t){return t.data},function(t){return Bt.a.error("系统错误"),console.log(t),n.a.reject(t)}),a.a.prototype.$fileUrl="http://118.24.27.231:81/uploadfile",a.a.prototype.$axios=Wt.a,a.a.prototype.$linq=Vt.a.from,a.a.prototype.$format=function(t,e){var i=new Date(t),s={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[n]:("00"+s[n]).substr((""+s[n]).length)));return e},a.a.prototype.$numberFormat=function(t){t=(t+"").replace(/[^0-9+-Ee.]/g,"");var e=isFinite(+t)?+t:0,i=isFinite(2)?Math.abs(2):0,s="";s=(i?function(t,e){var i=Math.pow(10,e);return""+Math.floor(t*i)/i}(e,i):""+Math.floor(e)).split(".");for(var n=/(-?\d+)(\d{3})/;n.test(s[0]);)s[0]=s[0].replace(n,"$1,$2");return(s[1]||"").length<i&&(s[1]=s[1]||"",s[1]+=new Array(i-s[1].length+1).join("0")),s.join(".")},new a.a({el:"#app",router:Lt,store:At,components:{App:c},template:"<App/>"})},Wslx:function(t,e){},hazr:function(t,e){},mFa2:function(t,e){},qe9c:function(t,e){},tBds:function(t,e){},vwGY:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.25505b303a071c65b826.js.map